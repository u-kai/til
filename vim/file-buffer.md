# ファイルとバッファについて

## バッファとは

-   Vim では単一の編集セッションのなかで複数のファイルを扱える
-   一度に一つのファイルを表示しても良いし，ワークスペースを分割ウィンドウやタブに分けたりできる

    -   それぞれの分割ウィンドウやタブは独自にバッファを持つ

## バッファリスト

-   バッファリストを使うと編集セッション時にオープンしてきたファイル軍を管理可能

-   :ls で現在のバッファリストを取得可能

## バッファの切り替え

-   バッファ切り替えには:bnext を利用する
    -   :bn でも可能
-   :ls が表示するバッファリストの先頭には数字があるため，:buffer N で即座にバッファを移動することも可能
-   :buffer {bufname}のように名前してしても良い

## バッファの削除

-   :bdelete N1 N2 または N,M bd

## 引数リスト

-   引数リストは vim コマンドの起動時に引数として渡されたファイルのリストを表す
-   :args を引数なしで実行すると引数リストの内容が表示される
-   :args にファイル名やコマンドの結果,\*などを渡すことができ，引数リストに追加することができる
    -   コマンドを実行するときは\`\`で囲んであげる

## 引数リストを使ってバッファをコレクションにまとめる

-   バッファリストの管理用のコマンドは柔軟性に欠けおり，バッファを並べ替えたいという場合は，バッファリストを整理するのではく，分割ウィンドウ，タブページ，引数リストを使って，ワークスペースを分けていくのが良い

-   引数リストの管理は簡単で，これを使うとファイルをコレクションにしてファイル間を簡単に移動できるようになる
-   :argdo コマンドを使えば引数リスト中の各要素に Ex コマンドを実行できる

## 隠しバッファの扱い

-   バッファの内容が変更されたら，変更を保持しないまま間違ってエディタを終了することがないように,Vim は隠しバッファとして特別扱いする
-   隠しバッファは+と表示される
-   隠しバッファの編集を無効にしたい場合は:e!をすることで，ファイルをディスクから読み込み直してバッファの内容を上書きする
-   そうすることで編集した内容は破棄されかつ,隠しバッファがなくなる

## argdo

-   前引数リストへ Ex コマンドを実行する
-   ただし，実行によって変更される場合は全てのファイルを保存しないと，Vim に怒られるため，:wall で全てのバッファを保存してしまうのが良い

## ワークスペースを分割ウィンドウにする

-   ウィンドウを複数開くと，そこに同じバッファを表示したり，それぞれのウィンドウに別々のバッファを読み込んだりできる
-   :sp filename で分割ウィンドウに別のバッファをオープンできる
-   :clo でアクティブなウィンドウを閉じる
-   :on でアクティブなウィンドウだけを残す
-   Ctl+w= でウィンドウの面積を全て同じにする
-   [N]Ctl+w\_ でアクティブなウィンドウの高さを N にする
-   [N]Ctl+w| でアクティブなウィンドウの幅を N にする

## タブページ

-   タブページは仕事をいくつかのワークスペースに分離するのに使える
-   Vim のタブページはバッファとは 1 対 1 の関係にマップされない
-   タブページはウィンドウのコレクションを格納するコンテナ
-   使い方
    -   新しいタブページは:tabedit filename コマンドで作成できる
    -   filename を省略すると Vim は空のバッファを格納するタブページを新規に作成する
    -   CtlwT で現在のウィンドウを新たなタブページに移動する
    -   Ngt コマンドでタブを切り替えられる
    -   N が省略されると次のタブに切り替わる
        -   gT で前のタブに切り替わる
        -   :tabn でも同じ

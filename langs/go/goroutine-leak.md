# ゴルーチンリークを避ける

- ゴルーチンが終了に至るまでの流れにはいくつかの種類がある

  - ゴルーチンが処理を完了する場合
  - 回復できないエラーにより処理を続けられない場合
  - 停止するように命令された場合

- 停止することがないゴルーチンの問題を緩和するためにはゴルーチンの親子間で親から子にキャンセルのシグナルを送れるようにする

  - 習慣としてこのシグナルは通常 done という名前の読み込み専用チャネルにする
  - 親ゴルーチンはこのチャネルを子ゴルーチンに渡して，キャンセルさせたい時にチャネルを閉じる

- もしあるゴルーチンがゴルーチンの生成の責任を持っているのであれば，その後ルーチンを停止できるようにする責任もある
- この規約によってプログラムが構成可能で自由にスケールできるようになる
- ごルーチンを停止させるやり方はごルーチンの種類と目的によって変わるが，いずれも done チャネルを渡すという基本に基づいている

# GOMAXPROCS レバー

- runtime パッケージにある
- ワークキューと呼ばれる OS スレッドの数を制御しているもの
- Go1.5 以前では常に 1 に設定されていた
- 以下のように編集できる

```go
runtime.GOMAXPROCS(runtime.NumCPU())

```

- 大体の場合で開発者はプロセスが時効されているマシンの全ての CPU コアを利用したいと考えるため，Go のそれ以降のバージョンでは自動的にホストマシンの論理 CPU の数に設定されるようになっている
- それでもなお設定をした方がいい時は，わざと論理 CPU をコアの数以上に増やすことで，競合状態の再現をしたりできる
  - 隔離されにくくなって競合状態を補足できるって感じ？

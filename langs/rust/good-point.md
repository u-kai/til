---
marp: true
---

# æœ€å…ˆç«¯ï¼Ÿè¨€èª Rust ã®ç´¹ä»‹

---

# æ³¨æ„äº‹é …

- æœ¬ç™ºè¡¨ã¯è‡ªçµ„ç¹”ã¨ã¯å…¨ãé–¢ä¿‚ãŒã‚ã‚Šã¾ã›ã‚“.
- Rust ã«ãƒã‚¤ã‚¢ã‚¹ãŒã‹ã‹ã£ãŸç™ºè¡¨å†…å®¹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“.ã”äº†æ‰¿ãã ã•ã„.

---

# ç›®æ¬¡

- æœ¬æ—¥ã®ç‹™ã„
- Rust ã¨ã¯ï¼Ÿ
- ç§ã®æ¨ã—ãƒã‚¤ãƒ³ãƒˆ
- ãŠã™ã™ã‚ã® Rust ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ã¤ã„ã¦

---

# æœ¬æ—¥ã®ç‹™ã„

- ä¸€äººã§ã‚‚å¤šãã®æ–¹ã« Rust ã«èˆˆå‘³æŒã£ã¦ã‚‚ã‚‰ã†!
  - ã‚ˆãã‚ã‹ã‚‰ã‚“ã‘ã©ï¼Œãªã‚“ã‹ã™ã”ãã†ï¼è©¦ã—ã¦ã¿ã‚ˆã†ï¼ã¨æ€ã£ã¦ã‚‚ã‚‰ãˆã‚‹ã‚ˆã†ã«è³‡æ–™ã‚’ä½œæˆã—ã¾ã—ãŸï¼
- ã‚ã‚ã‚ˆãã°å¼Šç¤¾ Rust ã®è¼ªã‚’åºƒã’ã‚‹!
  - Rust ã§æ›¸ããŸã„ã‚“ã§ã™...ğŸ™‡

---

# Rust ã¨ã¯

## ã‚ˆãè¨€ã‚ã‚Œã¦ã„ã‚‹ã“ã¨ã¯ï¼ï¼ï¼

- 2015 å¹´ã« ver1.0 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸæ¯”è¼ƒçš„è‹¥ã„è¨€èª
- stack overflow ã®æ„›ã•ã‚Œã¦ã„ã‚‹è¨€èªãƒ©ãƒ³ã‚­ãƒ³ã‚° 7 å¹´é€£ç¶š 1 ä½ï¼
- å®Ÿè¡Œã‚¹ãƒ”ãƒ¼ãƒ‰ã¯ C,C++ è¨€èªä¸¦ã¿ã«ã‚‚é–¢ã‚ã‚‰ãšãƒ¡ãƒ¢ãƒªå®‰å…¨ï¼
- å®‰å…¨æ€§ã¨å®Ÿè¡Œã‚¹ãƒ”ãƒ¼ãƒ‰ã‹ã‚‰, ä»–è¨€èªã‹ã‚‰ã®ç½®ãæ›ãˆã¨ã—ã¦åã ãŸã‚‹ä¼æ¥­ãŒæ³¨ç›®ï¼
  - Amazon
  - Google
  - Microsoft ...

---

# C è¨€èªä¸¦ã¿ã®ã‚¹ãƒ”ãƒ¼ãƒ‰ãªã‚“ã¦ã»ã¨ã‚“ã©ã®ã‚±ãƒ¼ã‚¹ã§ä¸è¦ã§ã¯ï¼ŸğŸ¤”

---

# ã‚¹ãƒ”ãƒ¼ãƒ‰ã ã‘ã˜ã‚ƒãªã„ã‚“ã§ã™ï¼ï¼ğŸ‘

# ä»•æ§˜ã‚„æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãªã©ã‚‚ãƒ¤ãƒã„ã‚“ã§ã™ï¼ï¼ğŸ˜

# ãã—ã¦ä½•ã‚ˆã‚Šï¼ï¼ï¼

---

# æ›¸ã„ã¦ã¦æ¥½ã—ã„ï¼ï¼ï¼ï¼ï¼

## ã“ã‚ŒãŒç§ã® 1 ç•ªã®æ¨ã—ãƒã‚¤ãƒ³ãƒˆã§ã™!

---

# 1.å …ç‰¢ã§ã‚¹ãƒãƒ¼ãƒˆãªå‹ã‚·ã‚¹ãƒ†ãƒ 

- Rust ã¯é™çš„å‹ä»˜ã‘è¨€èªã®ä¸­ã§ã‚‚å¼·ã„å‹æ•´åˆæ€§ã§ã„ã‚ã‚“ãªç¨®é¡ã®å‹ãŒã‚ã‚‹
- å‹æ•´åˆæ€§ã•ãˆã‚¯ãƒªã‚¢ã™ã‚Œã°ã‚³ãƒ¼ãƒ‰ãŒå‹•ãã¨è‡ªä¿¡ã‚’æŒã¦ã‚‹ï¼ğŸ’ª
- å‹ãŒå¤šãã‚’èªã£ã¦ãã‚Œã‚‹ãŸã‚ï¼Œå¯èª­æ€§ãŒé«˜ã„ã‚³ãƒ¼ãƒ‰ãŒã§ãã‚‹!ğŸ‘

```rust
fn bin_to_hex(bin:&str)->Result<String,Error> {
  // åå‰ã‹ã‚‰å¯Ÿã™ã‚‹ã«2é€²æ•°ã‚’16é€²æ•°ã«å¤‰æ›´ã™ã‚‹ã®ã‹ãªï¼Ÿ
  // å¼•æ•°ã¯æ–‡å­—åˆ—ãªã®ã­
  // å¤±æ•—ã™ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã®ã­ï¼ç¢ºã‹ã«binã«01ä»¥å¤–ã®ã‚‚ã®ãŒã‚ã‚Œã°å¤±æ•—ã™ã‚‹ã‚ˆã­
}
```

- å‹æ¨è«–ãŒã‚¨ã‚°ã„ã‹ã‚‰ï¼Œå®šç¾©ä»¥å¤–ã§å‹ã‚’æ›¸ãã“ã¨ã¯ã»ã¨ã‚“ã©ãªã„ï¼ğŸ¥°

```rust
let data:String = String::from("data")
// ã‚ã–ã‚ã–å‹ã‚’æ›¸ã‹ãªãã¦ã‚‚OK
let data = String::from("data")
```

---

# ã§ã‚‚å‹ã®æ•´åˆæ€§ãŒå¼·ã„ã¨æŸ”è»Ÿæ€§ãŒãªããªã‚‰ãªã„ï¼Ÿï¼ŸğŸ¤”

```rust
fn my_print(data:&str){
  println!("{}",data);
}
// OK
my_print("Hello world!");

// NG
my_print(100);

// NG
// Rustã«ã¯ãŸãã•ã‚“ã®æ–‡å­—åˆ—ã‚’è¡¨ç¾ã™ã‚‹å‹ãŒã‚ã‚Šã¾ã™ï¼ï¼ï¼
my_print(String::from("Hello world!"));
```

---

# trait ã‚„ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã«ã‚ˆã‚‹æŸ”è»Ÿæ€§

```rust
// traitã‚’å®šç¾©
trait Printable:Debug {}

// ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ä½¿ã£ã¦é–¢æ•°ã®å¼•æ•°ã‚’å®šç¾©
// ã“ã®Pã¯Printableã‚’å®Ÿè£…ã—ã¦ã„ã‚Œã°ä½•ã§ã‚‚OK!
fn my_print_use_generic<P:Printable>(data:P){
  println!("{:#?}",data);
}

// traitã®ã™ã”ã„ã¨ã“ã‚ã¯å‹ã®å®šç¾©ã‚ˆã‚Šã‚‚å¾Œã«å®Ÿè£…ã‚’è¡Œã†ã“ã¨!
// èªå¼Šã‚’æã‚Œãšã«è¨€ã†ãªã‚‰ï¼Œã©ã‚“ãªå‹ã§ã‚‚å®šç¾©ã‚’å¤‰æ›´ã›ãšã«å¾Œã‹ã‚‰æŒ¯ã‚‹èˆã„ã‚’å¤‰ãˆã‚‰ã‚Œã‚‹ã¨è¨€ã†ã“ã¨
impl Printable for usize {}
impl Printable for str{}
impl Printable for String{}
impl Printable for MyStruct{}
// Third partyãŒå®šç¾©ã—ãŸå‹ã«ã‚‚ç‹¬è‡ªã®æŒ¯ã‚‹èˆã„ã‚’è¿½åŠ ã§ãã‚‹(é€†ã‚‚ã¾ãŸç„¶ã‚Š)
// interfaceã§ã¯ã§ããªã„(ã¯ãšï¼ï¼ï¼)
impl Printable for LibraryStruct{}

// All OK
my_print_use_generic("Hello world!");
my_print_use_generic(String::from("Hello world!"));
my_print_use_generic(100 as usize);
my_print_use_generic(MyStruct::new());
my_print_use_generic(LibraryStruct::new());
// NG
// -100ã¯å‹æ¨è«–ã•ã‚Œã‚‹ã¨i32å‹
// i32å‹ã«Printableã¯å®Ÿè£…ã•ã‚Œã¦ã„ãªã„ã®ã§NG
my_print_use_generic(-100)
```

---

# 2.test ãŒè¨€èªä»•æ§˜ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹

- å¤šãã®è¨€èªã¯ãƒ†ã‚¹ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦
- Rust ã ã¨ä¸‹ã®ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ cargo test ã§ OK

```rust

fn add(left:i32,right:i32) -> i32 {
    left + right
}

#[cfg(test)]
#[test]
fn test_add(){
    assert_eq!(add(3,4),7);
}
```

- ã—ã‹ã‚‚ãƒ†ã‚¹ãƒˆã‚’å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã¨åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ã‘ã‚‹!
  -> æ›¸ãã‚„ã™ã„ï¼†ã‚³ãƒ¼ãƒ‰ã®æŒ™å‹•ã‚’ã™ãã«ç¢ºèªã§ãã‚‹!

---

# 3. ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚„æ¨™æº–æ©Ÿèƒ½ãŒå„ªã—ã„

- æ¨™æº–æ©Ÿèƒ½ã®ã»ã¨ã‚“ã©ã« doctest ãŒè¨˜å…¥ã•ã‚Œã¦ã„ã‚‹ã®ã§è¿·ã†ã“ã¨ãŒãªã„!
- ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒä¸å¯§ã«æ•™ãˆã¦ãã‚Œã‚‹ï¼

  - ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®æŒ‡ç¤ºã«å¾“ã£ã¦ã„ã‚Œã°ã‚ã‚‰ã‹ãŸä¸Šæ‰‹ãã„ãï¼
  - ãƒšã‚¢ãƒ—ãƒ­ã—ã¦ã„ã‚‹ã¿ãŸã„

---

# 4.macro ãŒé¢ç™½ã„ï¼

- åå‰ã®å¾Œã‚ã«!ãŒã¤ã„ã¦ã„ã‚‹ã‚‚ã®

```rust
println!("{}",data);
assert_eq!(1,1);
let concat:String = format!("{}/{}"month,day);
let groups:Vec<&str> = vec!["tic","it","dict"];
```

- é–¢æ•°ã¨ä¼¼ã¦ã„ã‚‹ã‘ã©é•ã†ã‚‚ã®
  - é–¢æ•°ã®ã‚ˆã†ã«æŒ¯ã‚‹èˆã†ã‚‚ã®ã‚‚å¤šã„ãŒå®Ÿæ…‹ã¯é•ã†
- é–¢æ•°ã¯å®Ÿè¡Œæ™‚ã«ã‚³ãƒ¼ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹ãŒ macro ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦å±•é–‹ã•ã‚Œã‚‹
- ã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸!

---

# macro ã®å®šç¾©ä¾‹

```rust
// define of macro
macro_rules! fn_time {
    ($fn:ident,$($args:ident),*) => {
        let timer = std::time::Instant::now();
        $fn($($args),*);
        println!("time = {:?}", timer.elapsed());
    };
}

fn heavy_calc(sec:usize) {
    sleep(Duration::from_secs(sec));
}
// use of macro
fn_time!(heavy_calc,1);
// time = 1.00002s
```

---

# macro ãŒå±•é–‹ã•ã‚ŒãŸæ™‚ã®ã‚¤ãƒ¡ãƒ¼ã‚¸

```rust
// before
fn_time!(heavy_calc,1);
```

```rust
// after
let timer = std::time::Instant::now();
heavy_calc(1);
println!("time = {:?}", timer.elapsed());
```

- é–¢æ•°ã§ã¯åˆ°é”å›°é›£ãªè¡¨ç¾åŠ›ï¼
- ãŸã ã—ï¼Œå¯èª­æ€§ã¯ä½ããªã‚ŠãŒã¡ãªã®ã§ï¼Œæœ¬ç•ªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã‚„ã‚Šã™ãæ³¨æ„ï¼
- éŠã¶åˆ†ã«ã¯æœ€é«˜ã®ãŠã‚‚ã¡ã‚ƒï¼ï¼

---

# ãŠã™ã™ã‚ã® Rust ã‚³ãƒ³ãƒ†ãƒ³ãƒ„

- rust the book
  - ç„¡æ–™ã® Web ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
  - åŸºæœ¬çš„ãªã“ã¨ãŒä¸å¯§ã«è§£èª¬ã•ã‚Œã¦ã„ã‚‹
  - https://doc.rust-jp.rs/book-ja/
- ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° Rust ç¬¬ 2 ç‰ˆ
  - è©³ã—ãã‚ã‹ã‚Šã‚„ã™ãèª¬æ˜ã•ã‚Œã¦ã„ã‚‹
  - æœ¬æ ¼çš„ã«å§‹ã‚ã‚‹ãªã‚‰ãŠã™ã™ã‚ã§ã™
- rust playground
  - rust ã® web å®Ÿè¡Œç’°å¢ƒ
  - å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚ä½¿ã†ã“ã¨ãŒã§ãã‚‹!
  - https://play.rust-lang.org/?version=stable&mode=debug&edition=2021

---

# çµ‚ã‚ã‚Šã«

- æœ¬æ—¥ã¯ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼
- ã‚‚ã—ã”èˆˆå‘³ã‚ã‚Œã°ç§ã¾ã§ã”é€£çµ¡ãã ã•ã„ï¼
  - Rust ã®å‡„ã•ã¯ã“ã‚Œã ã‘ã§ã¯æ±ºã—ã¦ã‚ã‚Šã¾ã›ã‚“ï¼ç¬‘
- ã¿ãªã•ã¾ãŒ Rust ã«èˆˆå‘³ã‚’æŒã£ã¦ã„ãŸã ã‘ï¼ŒæŒ‘æˆ¦ã—ã¦ã„ãŸã ã‘ã¾ã—ãŸã‚‰å¹¸ã„ã§ã™!

---

# ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼

---

# è£œè¶³ï¼šæœ¬ç•ªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ¡ç”¨ã™ã‚‹æ—¨ã¿(äºˆæƒ³)

- å‹ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã£ã¦å‹å®‰å…¨ã§å“è³ªã®é«˜ã„ã‚·ã‚¹ãƒ†ãƒ ãŒä½œã‚Šã‚„ã™ã„
- ãƒ†ã‚¹ãƒˆãŒå®Ÿè£…ã®è¿‘ãã«æ›¸ã‘ã‚‹ã“ã¨ã‚„é«˜åº¦ãªå‹ã‚·ã‚¹ãƒ†ãƒ ãªã©ã®ãŠã‹ã’ã§ï¼Œå¯èª­æ€§ã‚„ä¿å®ˆæ€§ãŒé«˜ã„ã‚³ãƒ¼ãƒ‰ã«ãªã‚Šã‚„ã™ã„
- å®£è¨€çš„ã«ã‹ã‘ã‚‹ API ãŒå¤šãï¼Œã†ã¾ãã‹ã‘ã‚Œã°å¯èª­æ€§ã®é«˜ã„ã‚‚ã®ã«ã§ãã‚‹

```python
user_data = get_users()
age_sum = 0
user_num = 0
for user in user_data:
  if user.age is None:
    continue
  age_sum += user.age
  user_num += 1
```

```rust
let user_data:Vec<User> = get_users();
let users_holding_age = user_data.iter().filter_map(|user|user.age);
let count =  users_holding_age.by_ref().count();
let ave = users_holding_age.fold(0,|acc,user|acc+user.age) / count;
```

- å®Ÿè¡Œæ™‚é–“ãŒæ—©ã„ã“ã¨ã‚„ï¼Œãƒ¡ãƒ¢ãƒªæ¶ˆè²»é‡ã‚’æŠ‘ãˆã‚‰ã‚Œã‚‹ã“ã¨ã‹ã‚‰è¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹ã®ç¯€ç´„ãŒå¯èƒ½

---

# è£œè¶³ï¼šæœ¬ç•ªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ¡ç”¨ã™ã‚‹è¾›ã¿(äºˆæƒ³)

- å­¦ç¿’ã‚³ã‚¹ãƒˆãŒé«˜ã„
- ã‚¯ãƒ¬ãƒ¼ãƒˆ(ãƒ©ã‚¤ãƒ–ãƒ©ãƒª)ã®å……å®Ÿåº¦ãŒç™ºå±•é€”ä¸Š
  - AWS SDK ã¯ã¾ã  Developer Preview
  - ä»– ã‚µãƒ¼ãƒ“ã‚¹ã® SDK ã«ã¤ã„ã¦ã‚‚åŸºæœ¬ Rust è£½ã®ã‚‚ã®ã¯å°‘ãªã„
- å¤šæ©Ÿèƒ½ã‚†ãˆã«ã‚³ãƒ¼ãƒ‰ã®çµ±åˆ¶ãŒé›£ã—ã„ã‹ã‚‚
  - for æ–‡ã‚’ä½¿ã†ã®ã‹ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒ¼ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç©æ¥µçš„ã«ä½¿ã†ã®ã‹ï¼Ÿ
  - macro ã‚’ä½¿ã£ã¦ã‚³ãƒ¼ãƒ‰é‡ã‚’æ¸›ã‚‰ã™ã®ã‹æ„šç›´ã«æ›¸ã„ã¦å¯èª­æ€§ã‚’ä¸Šã’ã‚‹ã®ã‹

---

# è£œè¶³ï¼šä¼ãˆã‚‹ã‹æ‚©ã‚“ã é …ç›®

- if å¼
- if let ,let else
- ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ãƒ¼
- ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ
- æ‰‹ç¶šããƒã‚¯ãƒ­
- æ‰€æœ‰æ¨©
- ãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ 
- Rust ã‚’å­¦ã¶ã¨å¬‰ã—ã„å‰¯æ¬¡åŠ¹æœ

---

# Rust ã‚’å­¦ã‚“ã§ã‚ˆã‹ã£ãŸã“ã¨

- ãƒ¡ãƒ¢ãƒªã®å‰²ã‚Šå½“ã¦ã‚„ãƒã‚¤ãƒ³ã‚¿ãªã©æ·±ã„çŸ¥è­˜ã‚’èº«ã«ã¤ã‘ã‚‹ã“ã¨ãŒã§ããŸ
- è¨­è¨ˆåŠ›ãŒä¸ŠãŒã£ãŸæ°—ãŒã™ã‚‹
  - å¼·åŠ›ãªå‹ã‚·ã‚¹ãƒ†ãƒ 
  - trait å¢ƒç•Œ
  - æ‰€æœ‰æ¨©
- test ã‚’æ›¸ããŸã„æ¬²ãŒå¼·ããªã£ãŸ & test ã®å¤§åˆ‡ã•ã‚’å†èªè­˜ã§ããŸ

---

# Rust ã‚’å­¦ã‚“ã§ã‚ˆããªã‹ã£ãŸã“ã¨

- Rust ã—ã‹æ›¸ããŸãç„¡ããªã£ãŸ ğŸ˜¢

---

# è£œè¶³ï¼šä»Šå¾Œã‚„ã‚ŠãŸã„ã“ã¨

- Rust ã§å¤§è¦æ¨¡é–‹ç™º
- wasm

---

# å‹ãŒã‚ã‚‹ã“ã¨ã®æ©æµ

```python
def add(i,j):
    return i + j
```

```rust
fn add(i:i32,j:i32) -> i32 {
    i + j
}
```

---

# å …ç‰¢ãªå‹ã‚·ã‚¹ãƒ†ãƒ  Option å‹

```rust
let data = [1,2,3];
println!("{}",data[3]);
// error: this operation will panic at runtime
// index out of bounds: the length is 3 but the index is 3
```

```rust
let data = [1,2,3];
let maybe_d3:Option<&usize> = data.get(3);

match maybe_d3 {
    Some(d) => println!("{}",d),
    None    => println!("data len is {}",data.len()),
}
// data len is 3

sum = maybe_d + 3;
//error[E0369]: cannot add `{integer}` to `Option<&{integer}>`
```

- å‹ãƒ¬ãƒ™ãƒ«ã§å­˜åœ¨ã—ãªã„å¯èƒ½æ€§ãŒã‚ã‹ã‚‹
- Option å‹ã«ã¯ãŸãã•ã‚“ã®ä¾¿åˆ©ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚‹
- å‹ã«ã‚ˆã£ã¦å®ˆã‚‰ã‚Œã¦ã„ã‚‹ã®ã§ï¼Œã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«ä»»ã›ã¦ã‚¹ãƒˆãƒ¬ã‚¹ç„¡ãé–‹ç™ºã§ãã‚‹

---

# å …ç‰¢ãªå‹ã‚·ã‚¹ãƒ†ãƒ  Result

```python
with open("test.txt","r") as f:
    data = f.read()
# FileNotFoundError: [Errno 2] No such file or directory: 'test.txt'
```

```rust
let data = read_to_string("test.txt");
match &data {
    Ok(d)     => println!("{:#?}",d.split("\n").next()),
    Err(e)    => //something error case
}
lines = data.split("\n");
//error[E0599]: no method named `split` found for enum `Result` in the current scope
```

- å‹ãƒ¬ãƒ™ãƒ«ã§å¤±æ•—ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã‹ãŒã‚ã‹ã‚‹!
- Result å‹ã«ã¯ãŸãã•ã‚“ã®ä¾¿åˆ©ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚‹

---

```rust
// Resultã¯æˆåŠŸã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã®ç¢ºèªã‚’å¼·ã„ã‚‹->ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯ã‚’å¿˜ã‚Œãªã„
fn read_to_string(file:String)->Result<String,Error>;
let data = read_to_string("test.txt");

let lines = data.split("\n");
//error[E0599]: no method named `split` found for enum `Result` in the current scope

let lines = match &data {
    Ok(d)     => d.split("\n").next().unwrap(),
    Err(e)    => ""
}
//ok!
```

---

# å‹ãŒãªã„ã¨å‰æçŸ¥è­˜ãŒå¿…è¦ãªã“ã¨ãŒã‚ã‚‹

```python
# èª°ã‹ãŒæ›¸ã„ãŸã‚³ãƒ¼ãƒ‰(ã¾ãŸã¯åŠå¹´å‰ã®è‡ªåˆ†ãŒæ›¸ã„ãŸã‚³ãƒ¼ãƒ‰)
def get_child_from_class(class_,name):
    return class_.get(name)
```

- é–¢æ•°åã‹ã‚‰å¯Ÿã™ã‚‹ã« child ã‚’è¿”ã™ã¿ãŸã„ã ã‘ã©ï¼Œchild ã£ã¦ã©ã‚“ãªå€¤ï¼Ÿ
- name ã¯ str ã§ã„ã„ã®ã‹ãªï¼Ÿclass\_ã« name ã® child ãŒã„ãªã‹ã£ãŸã‚‰ã©ã†ãªã‚‹ã‚“ã‚„ï¼Ÿ
- ãã‚‚ãã‚‚ class\_ã£ã¦ã©ã‚“ãªå‹?

---

# å‹ã¯å¤šãã‚’èªã£ã¦ãã‚Œã‚‹

```rust
// èª°ã‹ãŒæ›¸ã„ãŸã‚³ãƒ¼ãƒ‰(ã¾ãŸã¯åŠå¹´å‰ã®è‡ªåˆ†ãŒæ›¸ã„ãŸã‚³ãƒ¼ãƒ‰)
fn get_child_from_class(class:Class,name:String)->Option<Child>{
    class.get(name)
}
```

- Class å‹ã‹ã‚‰æ–‡å­—åˆ—ã‚’å…¥ã‚Œã‚‹ã¨ Child å‹ãŒå¸°ã£ã¦ãã‚‹ã‚“ã ãª
- ã—ã‹ã‚‚ãã® Child ã¯å­˜åœ¨ã—ãªã„å ´åˆãŒã‚ã‚‹ã‹ã‚‰ï¼Œãã®éš›ã®ã“ã¨ã‚‚è€ƒãˆã‚ˆã†ï¼

---

# ä¾¿åˆ©ãªæ©Ÿèƒ½

- if let/let else

```rust
if let Some(name) = group.get("kai") {
  // process use name
}
let Some(name) = group.get("kai") else {
  return
}
// process use name
```

---

# å‹ã®ç´¹ä»‹: mut å‹

- å€¤ãŒå¤‰æ›´ã™ã‚‹ã‹å¦ã‹ã«å¯¾ã—ã¦ã‚‚å‹ãŒã¤ã‘ã‚‰ã‚Œã¦ã„ã¾ã™!

```rust
fn add_str(data:&mut String,added:&str){
  data.push_str(&added);
}

let mut h = String::from("Hello")

// hãŒæ›¸ãå¤‰ã‚ã£ã¦ã„ã‚‹ã“ã¨ãŒæ˜ç™½
add_str(&mut h,"world")

println!("{} ",h);
// Hello world
```

- ãƒ‡ãƒ¼ã‚¿ãŒçŸ¥ã‚‰ãªã„ã†ã¡ã«å¤‰æ›´ã•ã‚Œã¦ã„ã‚‹...ã£ã¦ã„ã†ã®ãŒå‹ãƒ¬ãƒ™ãƒ«ã§æ˜ç¢ºã«ãªã‚‹!

---

# å‹ã®ç´¹ä»‹: Result,Option å‹

- å¤±æ•—ã—ã†ã‚‹ã‚‚ã®ã‚„ï¼Œå­˜åœ¨ã—ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹ã‚‚ã®ã«å¯¾ã™ã‚‹å‹ãŒã‚ã‚Šã¾ã™
- ãƒã‚§ãƒƒã‚¯ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒå¼·åˆ¶ã—ã¦ãã‚Œã‚‹ã®ã§ï¼Œå®‰å…¨ãªã‚³ãƒ¼ãƒ‰ãŒæ›¸ã‘ã‚‹!

```rust
let data = [1,2,3];
println!("{}",data[3]);
// error: ...
// index out of bounds: the length is 3 but the index is 3

let maybe_d3:Option<&usize> = data.get(3);

//error[E0369]: cannot add `{integer}` to `Option<&{integer}>`
let sum = maybe_d + 3;

// Optionå‹ã‚„Resultå‹ãªã©ã®å±•é–‹ã‚’æ´åŠ©ã—ã¦ãã‚Œã‚‹match(æœ¬å½“ã¯ã‚‚ã£ã¨ã™ã”ã„ã§ã™ï¼)
let sum = match maybe_d3 {
    Some(d) => d + 3,
    None    => 0
}
```

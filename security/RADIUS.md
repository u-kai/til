# RADIUS

- 認証，認可，アカウンティングの AAA の機能を提供するプロトコル
- 認証には PAP，CHAP,EAP など様々なプロトコルを使用することができる
- 許可する情報はアトリビュートを用いて指定しパケットの中に格納する

  - ただし，RADIUS クライアントと RADIUS サーバーは自分がサポートしていないアトリビュートを無視する

- アカウンティング機能は利用状況の記録

  - クライアントの切断，接続，セッション時間，送受信したデータ量
  - 記録する情報はアトリビュートを用いて指定し，パケットの中に格納する

- アクセス要求，アクセス許可，アクセス拒否，アクセスチャレンジには 1812/UDP
- アカウンティング要求，アカウンティング応答には 1813/UDP
- パケットフォーマットは以下
  - 種別コード
  - ID
  - パケット長
  - 認証符号
    - RADIUS クライアント側で RADIUS サーバの主体認証と応答パケットのメッセージ認証を行う際に用いられる
  - アトリビュート情報

## 種別について

- アクセス要求

  - 種別コード 1
  - RADIUS クライアントが PAP や CHAP を用いて利用者の認証を行う
  - さらに RADIUS クライアントが RADIUS サーバに対してサービス利用を要求する
  - 1 台の RADIUS クライアントは複数のアクセス要求をアクセス要求を同時に送信しても良い

- アクセス許可

  - 種別コード 2
  - アクセス要求に対する応答
  - RADIUS サーバーが返却するもので許可か拒否いずれかを必ず返す

- アクセス拒否
  - 種別コード 3
  - アクセス要求に対する応答
  - RADIUS サーバーが返却するもので許可か拒否いずれかを必ず返す
- アクセスチャレンジ
  - 種別コード 11
  - RADIUS サーバ側が生成した乱数を用いて認証を行いたいときにサーバ側が送信する
  - これを受信した RADIUS クライアントはアクセス要求を送信しないといけない
- アカウンティング要求
  - 種別コード 4
  - RADIUS クライアントがアカウンティング情報の記録を要求する
- アカウンティング応答

  - 種別コード 5
  - RADIUS サーバが要求を受信したことを通知する
  - ん単なる受信確認

- p413 を見る感じ，まず PC が RADIUS クライアントと CHAP をしている
- そして RADIUS クライアントが RADIUS サーバへ CHAP の結果や元の情報をアクセス要求のアトリビュートとして渡している
- RADIUS サーバーは渡された情報の中の User の値からアクセス許可か拒否を返答している
- 最後に RADIUS クライアントが PC に対して結果を返却している

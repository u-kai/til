- 全ては 0,1 のデータとして保存され，実行されている
- つまり，人間が何かをコンピュータに指令を出すには 0,1 で命令やデータを表現してコンピュータに伝える必要がある
- しかしそれは人間にとってはとても難しい
- また作成されたプログラムを利用するユーザーもそのプログラムに入力するデータは 0，1 出なくてはいけなくなる
- これはプログラムを作成する側も利用する側も厳しい
- そこでプログラムの作成にはプログラム言語を，ユーザー向けのプログラムとしてソフトウェアが登場する
- プログラム言語とは
- ソフトウェアとは，プログラム言語を使って作成されているプログラムで主にユーザーの課題を解決するもの
  - たくさんある
- まとめ

  - プログラム言語によって，命令を人間がわかる記述で記載できるようになった

- ソフトウェアとハードウェアの違い

  - ハードウェアは一度作成されてしまうと変更するのは難しい
    - ほとんどが買い替える必要がある
  - ソフトウェアはプログラム言語の集合によって作成されているため，書かれているプログラムの内容を帰るだけで振る舞いを変更することができる
    - このおかげで社会はソフトウェアによってどんどんよくなっている
      - 身の回りのサービスはどんどんよくなっている

- OS とは
  - 権威あるソフトウェア
  - OS には様々な仕事がありすぎて，この仕事をするのが OS！とは言いにくいほど
    - ブラウザを動かすのは OS の仕事かどうかで裁判がおきたほどらしい
  - Windows OS とか MacOS とか言いますが，これは OS の種類を表している
  - OS もプログラミング言語から作成されています
    - 主には C 言語で作成されていますが，僕の大好きな Rust で書き換えが徐々に進んでいるというのはまた今度の話
  - OS の種類が違うとこれから説明する機能に対して，実行の仕方や名前が違うことがありますが，大体同じような機能を持っています
  - だいたい同じような機能を持っているからこそ，OS が違くとも，コンピュータとしての大きな役割は違わないのです
- OS には主にどんな仕事があるのか?
  - プログラムの実行
  - プロセスの管理
  - ハードウェアの制御
- プログラムの管理

  - CPU の説明では，プログラムカウンタに格納されているメモリアドレスの命令をメモリから取り出して実行するという説明をした
  - しかしここには，プログラムカウンタに実行したいプログラムのメモリアドレスが格納されていること，メモリに命令群が格納されていることが前提になっている
  - 誰かがやらないといけない
  - これをやってくれているのが OS

- プロセスの生成

  - プロセスが生成されると，OS がプロセスに必要なメモリを割り当てる
  - プロセスが終了すると，OS がそのメモリを解放する
  - 図を載せる

- 演習

  - 自分の PC の CPU コア数を調べましょう
  - 現在 PC で動いているプロセスを列挙しましょう

- 明らかに CPU のコア数よりプロセス数の方が多いです．

  - ではなぜ，CPU はプロセスを同時に実行できるのでしょうか?
  - これは OS が実行するプロセスを細かい時間で CPU に割り当てているからです
  - このように OS にはプロセスのスケジュール管理機能があります

- ハードウェアの制御

  - ハードウェアに対して誰もが柔軟性高い命令を出せてしまうと困ることがあります
    - 結局のところ最終的に何かがされるというのはハードウェアに対して何かがされるということ
  - 例えば，今実行している CPU の処理を別のプロセスに置き換えたり
  - あるプロセスが利用しているメモリを別のプロセスが利用できるようにしたり
    - これはセキュリティ的によくない
  - あるプロセスがネットワーク通信を行う際に，割り込んで悪意のあるデータを送信したり
    - これはセキュリティ的によくない
  - 悪意がなくとも，知らない間にデータを別のデータに上書きしてしまったり
    - pptx とかの次元とは違うようにしたい
      - pptx はあくまで人間が自分でデータを上書きしてしまう
    - ここでの話は，プログラムの実行が非決定的になってしまうこと
      - 他のプログラムによって何かされてしまう可能性があることが非決定的にしてしまう

- これらのハードウェアに対するアクセスは OS の機能を経由してのみ実行できるようになっている
- またこれらのことを防ぐために CPU にはモードがある

  - ユーザーモードはユーザーがプログラムを実行する際に利用するモード

    - 計算や，そのプログラムに用意されているメモリ領域に対して何かしらのアクセスをする

  - カーネルモードはハードウェアへのアクセスなどの OS の機能を利用する際に利用するモード
    - ユーザーモードではできないことができる
    - カーネルモードになるにはシステムコールという特別な命令を CPU が実行する必要がある
    - カーネルモードになった後は実行したい OS の機能が格納されているメモリアドレスから命令群を取り出して実行する
    - 実行が終わり次第，ユーザーモードに戻る
    - また，これらの命令をそのまま 0,1 で記述してユーザーモードで行おうとしても CPU 側でエラーが生じる

- これまでの説明で紹介したものは以下の図のように分けられると思います
  - 人 → ソフトウェア → ハードウェア
  - 人はソフトウェアを利用することで実際に稼働しているハードウェアの難しさを気にせずに何かを達成できます
  - もう少し分解するとこのような図になります
  - 人 ->

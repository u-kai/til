---
marp: true
---

# Linux 概要

---

# プログラムとプロセス

- Linux では様々なプログラムが動作している

  - プログラムとはコンピューター上で動作する一連の命令，およびデータをひとまとめにしたもの
  - プログラム言語をコンパイルし他ものや，スクリプト言語などのソースコード
  - カーネルもプログラムの一種

- マシンの電源を入れると最初にカーネルが起動する
- 起動後に動作中のプログラムのことをプロセスという

---

# カーネルとは？超概要

- OS の中核を担うプログラム
- Linux とは実は OS ではなくカーネルのことを指す
- デバイスやファイルシステム,プロセス管理など重要な機能を操作するプログラム
- 上の操作をしたい場合はカーネルに対してシステムコール(お願い)を行うしかない
- このようにカーネルのみが重要な操作をできるようにすることで，誤った操作や危険な操作を防ぐことができている

---

# CPU のモード

- 前ページのようにカーネルはハードウェアの助けを借りてプロセスからデバイスに直接アクセスできないようにしている

- 具体的には CPU に備わるモードという機能を使う

- CPU にはユーザーモードとカーネルモードがある

  - ユーザーモードではできることが限られている
  - カーネルモードでは制限事項がない

- Linux の場合はカーネルのみがカーネルモードで動作してデバイスにアクセスできる
- それに対してプロセスはユーザーモードで動作するため，デバイスにアクセスできない
- このためプロセスはカーネルを介して間接的にデバイスにアクセスする

---

# システムコール

- システムコールとはプロセスがカーネルに処理を依頼するための方法
- システムコールの例は以下の通り

  - プロセス生成、削除
  - メモリ確保、解放
  - 通信処理
  - ファイルシステム操作
  - デバイス操作

- CPU はシステムコールを発行する際に，ユーザーモードからカーネルモードに移行する
- システムコールの処理の冒頭でカーネルはプロセスからの要求が正当なものか判断する
  - 不正なものはエラーとして処理を中断する
- プロセスからシステムコールを介さずに直接 CPU のモードを変更する方法はない

---

# Fluentd

- k8s 上で起動しているコンテナのログを中長期的に安定保存するためには Fluentd を使ってクラスタ外部に転送する構成が良い
- Fluentd を k8s に組み込んで利用するには DaemonSet を利用して各ノードに Fluentd の Pod を一つずつ起動する方法をとる
- DaemonSet が作成する各ノードの FluentdPod は同じノード上に起動している全コンテナのログを取得して転送する
- Docker コンテナの標準出力に出力されたログがノード上の/var/log/containers/などに出力され，この配下にあるログファイルを Fluentd Pod が tail プラグインを使って読み出して転送している
- そのためログを転送したいコンテナに対して特別な設定をする必要はなく，Fluentd を DaemonSet で起動するだけで k8s 上で起動しているコンテナのログを収集できるようになる

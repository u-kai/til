# テストの可読性

-   テストを綺麗にしたり，新しいテストを書いたりする時に可読性を損なう問題として気をつけるべき点
    -   テスト名が個々のテストケースのポイントや他のテストケースとの違いについてきちんと説明できていない
    -   一つのテストケースが複数のフィーチャーを実行しようとしているように見える
    -   様々な仕組みでテストしているため，ざっと眺めただけではテストの意図をつかみにくい
    -   テストのセットアップや例外処理のためのコードが大量にあり，本質的なロジックが埋もれてしまっている
    -   テストの中でリテラル値が使われており，その値の何が重要なのかがはっきりしない

## フィーチャーを表すテスト名

-   テスト名は何をテストするのか，あるいは対象のオブジェクトがどのように振る舞っているのかと言うことについて開発者が知るための最初の手掛かりとなる
-   クラスに実装されている名前をそのまま使うのは単に対象のクラスを見ればわかる情報を重複させているにすぎない
-   知りたいことはメソッドがあるかどうかではなく，そのオブジェクトが様々な状況で何を行うのか，そしてそのメソッドが何のために存在するのか
-   もっと良い方法は対象のオブジェクトが提供するフィーチャに基づいてテストの名前をつけること
-   TestDox の規約

    -   テスト対象のクラスを暗黙の主語として，テスト名を一つの文として読めるようにする
    -   例えば
        -   List は追加された順にアイテムを保持する
        -   List は複数の参照を同一のアイテムに保持できる
        -   List は保持していないアイテムを削除しようとすると例外を投げる

-   この規約のポイントは開発者にそのオブジェクトが何者なのかではなく，何をするのかという観点で考えさせるようにすると言うこと
-   また，既存のコードベースに少しずつ機能を追加していくと言うインクリメンタルなアプローチとも非常に相性がいい
-   この方法をつかうと，ユーザーストーリに始まり，タスク受け入れやテストなどを通じてユニットテストに至るまで，一貫した命名スタイルを手に入れることができる

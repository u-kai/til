Align Boundaries with Organizational Structures Conway’s Law says that systems tend to reflect the structure of the organization that creates it.6 One team usually finds it easier to integrate software and infrastructure that it owns wholly, and the team will naturally create harder boundaries with parts of the system owned by other teams.
Conway’s Law has two general implications for designing systems that include infrastructure. One is to avoid designing components that multiple teams need to make changes to. The other is to consider structuring teams to reflect the architectural boundaries you want, according to the “Inverse Conway Maneuver”. Legacy Silos Create Disjointed Infrastructure Legacy organizational structures that put build and run into separate teams often create inconsistent infrastructure across the path to production, increasing the time, cost, and risk of delivering changes. At one organization I worked with, the application development team and operations team used different configuration tools to build servers. They wasted several weeks for every software release getting the applications to deploy and run correctly in the production environments. For infrastructure, in particular, it’s worth considering how to align design with the structure of the teams that use the infrastructure. In most organizations these are product or service lines and applications. Even with infrastructure used by multiple teams, such as a DBaaS service (see “Storage Resources”), you may design your infrastructure so you can manage separate instances for each team. Aligning infrastructure instances with the teams that use them makes changes less disruptive. Rather than needing to negotiate a single change window with all of the teams using a shared instance, you can negotiate separate windows for each team.
Create Boundaries That Support Resilience When something fails in your system, you can rebuild an independently deployable component like an infrastructure stack. You can repair or rebuild elements within a stack manually, conducting infrastructure surgery. Infrastructure surgery requires someone with a deep understanding of the infrastructure to carefully intervene. A simple mistake can make the situation far worse.
Some people take pride in infrastructure surgery, but it’s a fallback to compensate for gaps in your infrastructure management systems. An alternative to infrastructure surgery is rebuilding components using well-defined processes and tooling. You should be able to rebuild any stack instance by triggering the same automated process you use to apply changes and updates. If you can do this, you don’t need to wake your most brilliant infrastructure surgeon when something fails in the middle of the night. In many cases, you can automatically trigger a recovery. Infrastructure components need to be designed to make it possible to quickly rebuild and recover them. If you organize resources into components based on their life cycle (“Align Boundaries with Component Life Cycles”), then you can also take rebuild and recovery use cases into account. The earlier example of splitting infrastructure that includes persistent data (Figure 15-6) does this. The process to rebuild the data storage should include steps that automatically save and load data, which will come in handy in a disaster recovery scenario. See “Data Continuity in a Changing System” for more on this. Dividing infrastructure into components based on their rebuild process helps to simplify and optimize recovery. Another approach to resilience is running multiple instances of parts of your infrastructure. Strategies for redundancy can also help with scaling.
境界を組織構造に合わせる コンウェイの法則によれば、システムはそれを作成した組織の構造を反映する傾向があると言われています。あるチームは通常、完全に所有するソフトウェアとインフラストラクチャを統合することがより簡単であり、他のチームが所有するシステムの一部とは自然とハードな境界を作り出します。

コンウェイの法則は、インフラストラクチャを含むシステムの設計に対して2つの一般的な含意を持っています。1つは、複数のチームが変更を加える必要があるコンポーネントの設計を避けることです。もう1つは、アーキテクチャの境界を反映するようにチームの構造を構築することを考慮することです。これは「逆コンウェイマニューバー」として知られています。

レガシーシロは不連続なインフラストラクチャを作り出す ビルドと実行を別々のチームで行うようなレガシーの組織構造は、製品の変更を提供するための経路全体で不一致なインフラストラクチャを作り出し、変更の提供にかかる時間、コスト、リスクを増加させます。私がかつて共働した組織では、アプリケーション開発チームと運用チームが、サーバーを構築するために異なる設定ツールを使用していました。彼らはソフトウェアのリリースごとに数週間の時間を浪費し、製品環境で正しくデプロイと実行されるようにアプリケーションを調整する必要がありました。特にインフラストラクチャの場合、インフラストラクチャを使用するチームの構造とデザインを調整することは価値があります。ほとんどの組織では、これらは製品やサービスライン、アプリケーションです。DBaaSサービス（「ストレージリソース」を参照）など、複数のチームが使用するインフラストラクチャでも、各チームごとに別々のインスタンスを管理できるようにインフラストラクチャを設計することができます。インフラストラクチャのインスタンスを使用するチームと整合させることで、変更が少なくなります。共有インスタンスを使用するすべてのチームと単一の変更ウィンドウを交渉する必要がなくなり、それぞれのチームごとに別々のウィンドウを交渉することができます。

レジリエンスをサポートする境界を作り出す システムの何かが失敗した場合、インフラストラクチャスタックのような独立してデプロイ可能なコンポーネントを再構築することができます。スタック内の要素を手動で修理または再構築することもできます。しかし、インフラストラクチャの手術にはインフラストラクチャについての深い理解を持つ人物が慎重に介入する必要があります。些細なミスが状況をますます悪化させる可能性があります。

一部の人々はインフラストラクチャ手術を誇りに思っていますが、それはインフラストラクチャ管理システムの欠陥を補うための代替手段です。インフラストラクチャのコンポーネントを再構築する代わりに、明確に定義されたプロセスとツールを使用してコンポーネントを再構築することができます。同じ自動化されたプロセスをトリガーとして使用して変更と更新を適用するのと同じ方法で、どのスタックのインスタンスでも再構築できる必要があります。これを行えば、夜中に何かが失敗した場合でも最も優れたインフラストラクチャの手術医を呼び出す必要はありません。多くの場合、リカバリーを自動的にトリガーすることができます。インフラストラクチャコンポーネントは迅速に再構築およびリカバリーできるように設計する必要があります。リソースをライフサイクルに基づいてコンポーネントに整理する場合（「コンポーネントのライフサイクルに境界を合わせる」を参照）、再構築およびリカバリーユースケースも考慮に入れることができます。前述のデータ永続化を含むインフラストラクチャの分割の例（図15-6）がこれを行っています。データストレージを再構築するプロセスには、データを自動的に保存およびロードする手順が含まれている必要があり、災害復旧シナリオで役立ちます。これについての詳細は、「変化するシステムにおけるデータの継続性」を参照してください。インフラストラクチャを再構築プロセスに基づいてコンポーネントに分割することで、リカバリーを簡素化し最適化することができます。冗長性を持つ戦略も拡張に役立ちます。
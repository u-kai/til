Deployable Parts of an Application A deployable release for an application may involve different elements. Leaving aside documentation and other metadata, examples of what may be part of an application deployment include: Executables The core of a release is the executable file or files, whether they are binaries or interpreted scripts. You can consider libraries and other files used by the executables as members of this category. Server configuration Many application deployment packages make changes to server configuration. These can include user accounts that processes will run as, folder structures, and changes to system configuration files. Data structures When an application uses a database, its deployment may create or update schemas. A given version of the schema usually corresponds to a version of the executable, so it is best to bundle and deploy these together. Reference data An application deployment may populate a database or other storage with an initial set of data. This could be reference data that changes with new versions or example data that helps users get started with the application the first time they install it. Connectivity An application deployment may specify network configuration, such as network ports. It may also include elements used to support connectivity, like certificates or keys used to encrypt or authenticate connections. Configuration parameters An application deployment package may set configuration parameters, whether by copying configuration files onto a server, or pushing settings into a registry.
You can draw the line between application and infrastructure in different places. You might bundle a required library into the application deployment package, or provision it as part of the infrastructure. For example, a container image usually includes most of the operating system, as well as the application that will run on it. An immutable server or immutable stack takes this even further, combining application and infrastructure into a single entity. On the other end of the spectrum, I’ve seen infrastructure code provision libraries and configuration files for a specific application, leaving very little in the application package itself. This question also plays into how you organize your codebase. Do you keep your application code together with the infrastructure code, or keep it separate? The question of code boundaries is explored later in this book (see Chapter 18), but one principle is that it’s usually a good idea to align the structure of your codebase to your deployable pieces.
アプリケーションの展開可能な部分 アプリケーションの展開可能なリリースには、さまざまな要素が含まれる場合があります。ドキュメンテーションやその他のメタデータを除いて、アプリケーションの展開の一部となる可能性のある例には、次のものがあります。 実行可能ファイル リリースの中心は実行可能ファイルまたはファイルであり、それがバイナリまたは解釈スクリプトであってもかまいません。実行可能ファイルが使用するライブラリやその他のファイルも、このカテゴリのメンバーと考えることができます。 サーバーの設定 多くのアプリケーション展開パッケージは、サーバーの設定を変更します。これには、プロセスが実行されるユーザーアカウント、フォルダー構造、システム構成ファイルの変更などが含まれる場合があります。 データ構造 アプリケーションがデータベースを使用する場合、展開時にスキーマを作成または更新する場合があります。スキーマの特定のバージョンは通常、実行可能ファイルのバージョンに対応しているため、これらを一緒にバンドルして展開するのが最適です。 参照データ アプリケーションの展開では、データベースや他のストレージに初期のデータセットを作成する場合があります。これは、新しいバージョンによって変更される参照データであることもありますし、ユーザーが初めてインストールしたときにアプリケーションを始めるのを支援するための例としてのデータであることもあります。 接続 アプリケーションの展開では、ネットワークの構成（ネットワークポートなど）を指定する場合があります。また、接続の暗号化や認証に使用される証明書やキーなどの接続のサポートに使用される要素も含まれる場合があります。 設定パラメータ アプリケーションの展開パッケージは、設定ファイルをサーバーにコピーするか、設定をレジストリにプッシュするなど、設定パラメータを設定する場合があります。 アプリケーションとインフラストラクチャの区別は、さまざまな場所で引かれることがあります。必要なライブラリをアプリケーションの展開パッケージにバンドルすることも、インフラストラクチャの一部として供給することもあります。例えば、コンテナイメージには通常、オペレーティングシステムのほとんどと、それ上で実行されるアプリケーションが含まれています。不変のサーバーまたは不変のスタックは、アプリケーションとインフラストラクチャを1つのエンティティに結合するというさらなる進化を遂げています。その他の例では、インフラストラクチャコードが特定のアプリケーションにライブラリや設定ファイルを提供し、アプリケーションパッケージ自体にはほとんど何も残っていないこともあります。この問題は、コードベースの組織方法にも関連しています。アプリケーションコードをインフラストラクチャコードと共に保持するか、別々に保持するかは、後ほどこの本で探求される問題です（第18章を参照）。ただし、ひとつの原則は、デプロイ可能なパーツの構造を、コードベースの構造に整合させることが通常は良いアイデアであるということです。
Reduce the Scope of Change Agile, XP, Lean, and similar approaches optimize the speed and reliability of delivery by making changes in small increments. It’s easier to plan, implement, test, and debug a small change than a large one, so we aim to reduce batch sizes.1 Of course, we often need to make significant changes to our systems, but we can do this by breaking things up into a small set of changes that we can deliver one at a time.
As an example, the ShopSpinner team initially built its infrastructure with a single infrastructure stack. The stack included its web server cluster and an application server. Over time, the team members added more application servers and turned some into clusters. They realized that running the web server cluster and all of the application servers in a single VLAN was a poor design, so they improved their network design and shifted these elements into different VLANs. They also decided to take the advice of this book and split their infrastructure into multiple stacks to make it easier to change them individually. ShopSpinner’s original implementation was a single stack with a single VLAN (see Figure 21-1).
The team plans to split its stack out into multiple stacks. These include the shared-networking-stack and application-infrastructure-stack seen in examples from previous chapters of this book. The plan also includes a web-cluster-stack to manage the container cluster for the frontend web servers, and an application-database-stack to manage a database instance for each application (Figure 21-2).
The team will also split its single VLAN into multiple VLANs. The application servers will be spread out across these VLANs for redundancy (see Figure 21-3).
Chapter 17 described the design choices and some implementation patterns for dividing these example stacks. Now we can explore ways to move from one implementation to another in a production system.

変化の範囲を縮小する アジャイル、XP、リーンなどのアプローチは、小さなインクリメントでの変更によって配信の速度と信頼性を最適化します。小さな変更は大きな変更よりも計画し、実装し、テストし、デバッグするのが簡単ですので、バッチサイズを減らすことを目指しています。もちろん、システムには大規模な変更が必要な場合もありますが、それを一度に納品できる小さな変更のセットに分割することで対応できます。
例として、ShopSpinner チームは最初に単一のインフラストラクチャスタックでインフラストラクチャを構築しました。このスタックには Web サーバークラスタとアプリケーションサーバーが含まれていました。その後、チームメンバーは追加のアプリケーションサーバーを追加し、いくつかはクラスタに変換しました。Web サーバークラスタとすべてのアプリケーションサーバーを単一の VLAN で実行するのは設計上の問題だと気づき、ネットワーク設計を改善し、これらの要素を異なる VLAN に移動しました。また、この本のアドバイスに従い、インフラストラクチャを複数のスタックに分割して個別に変更しやすくしようと決めました。ShopSpinner の最初の実装は、単一のスタックと単一の VLAN でした（図 21-1 参照）。
チームはスタックを複数のスタックに分割する計画です。これには、前の章の例で見た共有ネットワーキングスタックとアプリケーションインフラストラクチャスタックが含まれます。また、フロントエンド Web サーバーのコンテナクラスタを管理するための Web クラスタスタック、および各アプリケーションのデータベースインスタンスを管理するためのアプリケーションデータベーススタックも含まれます（図 21-2 参照）。
チームはまた、単一の VLAN を複数の VLAN に分割する予定です。冗長性のためにアプリケーションサーバーはこれらの VLAN に分散される予定です（図 21-3 参照）。
第 17 章では、これらの例のスタックを分割するための設計の選択肢といくつかの実装パターンについて説明しました。今度は、本番システムでの実装から別の実装に移行する方法を探索できます。

- 小さい方が認知負荷もデプロイ用意性も影響範囲も小さいよね

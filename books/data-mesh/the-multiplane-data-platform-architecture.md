データメッシュアーキテクチャのレベルコンポーネント
このハイレベルアーキテクチャと実際の実装の間にはまだ多くの問いが残っています
どのような具体的なテクノロジーを購入または構築するのか？これらのテクノロジーを評価するにはどうすればよいですか？それらを統合するにはどうすればよいですか？この章では、組織と利用可能な技術スタックの文脈でこれらの問いに答えるために適用できるフレームワークを紹介します
創造的な旅を始めるのに役立つプラットフォームの例を提供します
あなたの組織にとって真実であるかを発見するための曲がりくねった道を示します
今では、データメッシュプラットフォームの概念についてある程度理解ができ、それを説明するための言葉を持っています
4 章では以下のようなプラットフォームとして紹介されました：ドメインに依存しない相互運用可能なサービス、ツール、API のコレクションで、クロスファンクショナルなドメインチームが認知負荷を低減し、自律性を持ってデータ製品を作成し、利用することができるようにします
9 章では、操作範囲に基づいてプラットフォームサービスの異なるクラスを区別するためのマルチプレーンプラットフォームを提案しました
プラットフォームの 3 つのプレーンには、次のものが含まれます：
データインフラ (ユーティリティ) プレーン
ストレージ、パイプラインのオーケストレーション、計算などの物理リソースを供給し管理するためのアトミックサービス

データ製品エクスペリエンスプレーン
データ製品と直接操作する高レベルの抽象化サービスで、データ製品のプロデューサーとコンシューマーがデータ製品の作成、アクセス、保護などの操作を行うためのもの

メッシュエクスペリエンスプレーン
データ製品のメッシュ上で操作を行うサービス、例えばデータ製品の検索やデータ製品間のデータラインセージの観察

これらのプレーンは、データ製品の開発者、コンシューマー、オーナー、ガバナンス機能など、プラットフォームの利用者で直接アクセスすることができます
図 10-1 は、プラットフォームのプレーンとそのユーザーのパーソナリティを示しています
図 10-1
マルチプレーンのセルフサーブプラットフォームとプラットフォームのユーザー
メッシュ体験プレーンは、メッシュ全体を操作、ガバナンス、クエリする必要がある人々の体験を最適化します
たとえば、ガバナンスチームのメンバーやデータ製品オーナーは、メッシュの政策の現状を評価し、メッシュの一般的な運用状況をモニタリングし、既存のデータ製品を検索するために、このプレーンのサービスとやり取りを行います
また、データ製品のコンシューマーとプロバイダーも、検索、ブラウジング、ラインセージやログを介したデバッグなど、データ製品のコレクションを扱う場合に、このプレーンのサービスを使用します
データ製品のコンシューマーとプロバイダーは、主にデータ製品エクスペリエンスプレーンとやり取りし、データ製品の発見、学習、理解、利用、作成、維持を行います
データ製品エクスペリエンスプレーンは、データ製品の提供と消費を最適化するために設計されており、それらの間で交換される価値の単位であるデータ製品の提供と消費を管理します
それらは少ないながらも、インフラストラクチャプレーンのサービスを使用する場合もあります
これは、データ製品エクスペリエンスプレーンがまだ必要なサービスを提供していない場合によく起こります
たとえば、特定のデータ製品は、グラフクエリ言語を介して出力ポートを公開したい場合がありますが、データ製品エクスペリエンスプレーンはまだパッケージ化された出力ポートの実装としてこれをサポートしていません
この場合、データ製品の開発者は、インフラストラクチャサービスを直接使用してグラフクエリエンジンをプロビジョニングし、それを出力ポートの実装に接続することがあります
理想的には、彼らのグラフクエリ出力ポートの実装が後で収穫され、プラットフォームでサポートされている標準的な出力ポートに再組み込まれます
データメッシュプレーンは、サービスへのアクセスに厳密なレイヤリングを課しません
データ製品エクスペリエンスプレーンは、データ製品上の一連の操作を提供し、その基礎となるインフラストラクチャの複雑さを管理します
しかし、インフラストラクチャプレーンへのアクセスを厳密に制限することは意図していません
それはデータ製品との作業を非常に簡単にするだけでなく、ドメインチームにはインフラストラクチャーサービスで直接作業する動機がなくなるだろう
データ製品のエクスペリエンスプレーンは、ユーザーエクスペリエンスに最適化され、データインフラストラクチャーのユーティリティプレーンはリソースのパフォーマンスと利用率を最適化します
ユーティリティプレーンは、ストレージ、コンピュート、オーケストレーションなどの基盤となるインフラストラクチャープロバイダーが提供する最大の利点を引き出すために最適化されます
それはデータ製品のエクスペリエンスプレーンを基礎となる物理的なホスティング環境に適応させます
それは基礎となるリソースとそのユーザーの周りで組織されており、その大部分は他のプレーンを構築しているプラットフォームエンジニアです
データインフラストラクチャープレーンの多くのサービスは、運用システムと共有されています
この章では、ユーザーエクスペリエンスを中心に、データメッシュプラットフォームの機能設計をさらに進めていきます
データ製品の開発者と消費者のいくつかの主要な旅を進み、プラットフォームが旅を効率化するためにどのようなインターフェースを提供するかを発見します
ユーザージャーニーに基づいたプラットフォームの設計
プラットフォームの最終的な目的は、クロスファンクションのドメインチームにデータ製品を提供または消費させることです
したがって、プラットフォームの設計を開始する最良の方法は、プラットフォームユーザーの主要な旅を理解し、プラットフォームを使用して旅を成功裏に完了するための方法を評価することです
データメッシュエコシステムにはいくつかの主要な高レベルのパーソナがあります
データ製品の開発者
このパーソナは、一般的なプログラミングスキルを持つジェネラリスト開発者から既存の分析データ処理技術に精通した専門のデータエンジニアまで、幅広いスキルセットを考慮したデータ製品開発者の役割をカバーしています
彼らの仕事は次のようなものです

- データサイエンティストとしての ML モデルのトレーニングまたは推論
- データアナリストとしてのレポートやダッシュボードの作成
- 既存のデータからデータを消費する新しいデータ製品の開発
- オペレーションドメインでのデータ駆動型のサービスやアプリケーションの開発

これはかなり幅広い範囲であり、プラットフォームのインターフェースとサービスは役割によって異なる場合があります
データ製品の所有者
データ製品の所有者は、特定のドメインに対して成功したデータ製品を提供し普及させる責任を負っています
データ製品の成功は、採用と価値の提供、およびメッシュの広範なポリシーへの準拠性と他のデータ製品との相互運用性に依存します
彼らはプラットフォームを使用してデータ製品の最新動向を把握します
データガバナンスメンバー
データガバナンスは連邦構造に基づいているため、特定のデータガバナンスの役割はありません
それにもかかわらず、ガバナンスチームのメンバーは、メッシュ全体の最適で安全な運用を保証するための一連の責任を持っています
セキュリティや法的な問題についての専門知識を持つ専門家や特定の責任を持つデータ製品の所有者など、ガバナンスグループ内にはさまざまな役割があります
プラットフォームは彼らの集団的な旅をサポートし、個々の役割もサポートします
データプラットフォームの製品オーナー
データプラットフォームのプレーンとそのサービスは、他のすべての役割を再生するユーザーのものです
データプラットフォームの製品オーナーは、プラットフォームが最高のユーザーエクスペリエンスとなるようにプラットフォームサービスを提供する責任を持っています
プラットフォームユーザーのニーズと制約を理解した上で、データプラットフォームの製品オーナーは、プラットフォームが提供するサービスを優先します
データプラットフォーム開発者
プラットフォーム開発者は、データプラットフォームを構築・運用し、それを使用します
データプラットフォームのエクスペリエンスプレーンサービスで働くデータプラットフォーム開発者は、ユーティリティプレーンサービスのユーザーです
したがって、彼らのスキルセットと経験はユーティリティプレーンサービスの設計に重要です

この章では、データプロダクトの開発者とデータ科学者としてのデータプロダクトの消費者の 2 つの役割を使用して、プラットフォームの設計にアプローチする方法を示しています
データプロダクトデベロッパーのジャーニー
データプロダクトデベロッパーの主要なジャーニーの一つは、データプロダクトを作成し運用することです
これは、連続的な配信の原則「誰もが責任を持つ」という原則を受け入れた全体的な責任であり、長期的な責任です
データプロダクトの構築と運用は他人の問題ではありません
図 10-2 は、データプロダクトの作成プロセスの高レベルのフェーズを示しています
これらの段階は反復的で、継続的なフィードバックループを持っています
シンプルなデモンストレーションのため、私は旅を段階的に描いています
この旅は、データプロダクトの発想やソースの探索など、データプロダクトの発端に関連する活動から始まります
それは、実際のビルドとデータプロダクトの提供に進み、監視し、継続的に進化し、必要に応じて廃止されます
データプロダクトの開発の旅は、他の旅とも相互作用します
オペレーショナルシステムからデータを消費するソースに整列したデータプロダクトの場合、データプロダクトの開発者はソースアプリケーションの開発者と緊密に連携します
彼らは、アプリケーションがデータプロダクトへの入力として操作データを共有する方法を共同設計し、実装します
これらの人々は同じドメインチームに所属していることに注意してください
たとえば、プレイイベントデータプロダクトの開発は、生データを生成するプレイヤーアプリケーションとの緊密な協力が必要です
同様に、データプロダクトが既知の分析アプリケーションにビルドされている場合、消費者に整列したデータプロダクトの場合、データプロダクトの開発者と分析アプリケーションの開発者との早い段階での共同作業が発生します
データプロダクトの開発者は、分析アプリケーションの目標やデータフィールドのニーズ、データプロダクトがサポートする必要がある保証について理解する必要があります
たとえば、Daff では ML を利用したプレイリストの推奨アプリケーションは、音楽プロファイルデータプロダクトからデータを必要とします
音楽プロファイルデータプロダクトの開発者は、プレイリストの推奨アプリケーションチームと密接に連携して、プロファイルの予想分類に合わせる必要があります
データプロダクト開発の高レベルなステージと、それらをサポートするために設計されたプラットフォームインターフェースを見てみましょう（図 10-3）
注：インターフェースの表記とフレーズは最終的な実装の代表ではありません
機能に焦点を当てるために、命令形の言語が選択されていますが、実際には、API の宣言的な形式の方が望ましいです
たとえば、/deploy インターフェースは、展開されたデータプロダクトのための宣言的リソースである/deployments として非常によく実装されます
これらのインターフェースは模範的であり、操作の意味論を示していますが、実際の構文やインターフェースのメカニズム（CMD、UI、API など）とは異なります
図 10-3. プラットフォームを使用したデータプロダクト開発の旅の高レベルな例 インセプト、探索、ブートストラップ、およびソース データプロダクトは、そのデータを必要とする 1 つまたは複数の特定の分析ユースケースを発見することで存在するようになります
データプロダクト、特にソースに整列したものは、想像を超える多くの異なるユースケースがありますが、それでも我々はまず、現実のユースケースからデータプロダクトの創造（創造）を始める必要があります
消費者に整列したデータプロダクトの始まりは常に消費者との直接の協力を含みます
データプロダクトの開始時に、開発者はデータプロダクトの潜在的なソースを探し求める探索的なフェーズにいます
ソースは、上流データ製品、組織外のシステム、または組織内の運用システムとして発見されることがあります
探索中、開発者は上流ソースの発見情報を調査し、ソースの適切性、データの保証、ドキュメンテーション、データプロファイリング、既存のユーザーなどを評価することがあります
潜在的なソースが指名されたら、開発者は迅速にハローワールドデータ製品を立ち上げることができます
プラットフォームは必要なインフラストラクチャを提供します
これにより、データ製品の開発者はソースに接続し、シンセサイズされたデータ、隠蔽されたデータ、または実際のデータの形式でデータを消費することができます
この時点で、開発者はソースデータとデータ製品の変換ロジックを実験するために必要なすべてのリソースを持っています
これらのステップは、データ製品の構築の探索的ステップを構成します
迅速な発見、ソースの出力データへのアクセス、データ製品の素早い骨組み作り、インフラストラクチャの提供は、すべてインセプションおよびブートストラップフェーズの必要な要素です
たとえば、プレイリストチームは、異なる国での休日シーズンのために新しいプレイリストを生成する計画があります
彼らは地域の休日とその感情、またさまざまなトラックと関連する休日を関連付けるラベル付けされた音楽プロファイルのデータが必要です
彼らは同様の情報を持つメッシュ上の既存のデータ製品を検索して始めます
彼らはいくつかの音楽プロファイリングのソースを見つけ、それらのデータ製品に接続し、データの完全性と関連性を評価するためにデータを操作し始めます
彼らはシンプルな休日プレイリストデータ製品を作成して、音楽休日プロファイリングの最も単純な実装からどのようなプレイリストが生成できるかを確認します
表 10-1 は、このフェーズで使用されるプラットフォーム API の概要を提供しています
表 10-1
データ製品の開始フェーズをサポートするためのプラットフォームプレーンが提供する例のインターフェース
開発フェーズ プラットフォームプレーン プラットフォームインターフェース プラットフォームインターフェースの説明設立

| 探索 Mesh experience /search 適切なソースを見つけるために既存のデータ製品のメッシュを検索します
ソースの運用システム、ドメイン、およびデータの種類など、さまざまなパラメータに基づいて検索することができます
メッシュの経験/知識グラフ 関連するデータ製品のセマンティックモデルのメッシュを参照します
セマンティック関係をたどって、必要なデータソースを特定します

例：プレイリストチームは、見つけた休日に関連する音楽プロファイリング間のセマンティック関係を参照できます
Mesh experience /lineage メッシュ上の異なるデータ製品間の入出力データの系譜をたどり、データの起源とデータがどのような変換を経てきたかに基づいて必要なソースを特定します

例：プレイリストチームは、既存の音楽休日プロファイリングがいかに作成され、そのソースが何であるか、および何の変換が分類につながったかを調べることができます
これにより、既存の音楽休日プロファイリングの適切性を評価することができます
ブートストラップ|ソース データ製品の経験/{dp}/ディスカバリ ソースが特定されると、ドキュメント、データモデル、利用可能な出力ポートなど、すべてのデータ製品の発見可能性情報にアクセスできます
データ製品の経験/{dp}/観察 ソースが特定されると、データ製品の保証とメトリクス（リアルタイム）にアクセスできます
データがどのくらいの頻度でリリースされているか、最後のリリース日、データ品質メトリクスなどです

例：プレイリストチームが有望な休日音楽プロファイリングを見つけた場合、このデータがいかに頻繁に更新され、プラットフォーム上のすべての音楽と比較して完全性がどうかを評価する必要があります
この評価により、データへの信頼性が高まります
データ製品の経験/初期設定 ソースデータで実験を開始するために、この API はインフラストラクチャが利用可能な十分な骨組みのデータ製品をブートストラップします
これにより、ソースに接続し、データにアクセスし、データに変換を実行し、確認のために単一のアクセスモードで出力を提供することができます
データ製品の足場は、継続的な配信パイプライン、初期環境、データ処理クラスタの割り当て、およびデータ製品のインフラリソースの実行とアクセスのためのアカウントを確保します
これは、データ製品のライフサイクルの始まりを示します
メッシュ体験/登録 新しいデータ製品の初期化中、自動的にメッシュに登録されます
一意のグローバル識別子とアドレスが割り当てられ、データ製品がメッシュとガバナンスプロセスに表示されるようになります
データ製品の経験/接続 ソースが見つかると、データ製品はそれに接続することでソースにアクセスできるようになります
このステップでは、ソースを規制するアクセス制御ポリシーが検証されます
これにより、データ製品へのアクセス許可のリクエストがトリガーされる場合があります
ブートストラップ|ソース（続き） データ製品の経験/ {dp} / {output} /
query
/ {dp} / {output} /
subscribe ソースデータ製品の特定の出力ポートからデータを読み取ります
プルベースのクエリングモデルまたは変更のサブスクライブ方法で

ビルド、テスト、デプロイ、ラン
データ製品開発者は、データ製品の構築、テスト、デプロイ、および運用に対して最後までの責任を負います
私が単に「ビルド、テスト、デプロイ、ラン」と呼んでいるこのステージは、データ製品開発者が成功したデータ製品のために必要なすべてのコンポーネントを提供するために実行する連続的かつ反復的な一連の活動です
このデータ製品は、自律的に発見可能、理解可能、信頼性があり、アドレス可能、相互運用可能かつ構成可能で、安全で、ネイティブにアクセスできるだけでなく、それ自体で価値のあるものである（「データ製品のベースラインの使いやすさ属性」を参照）
表 10-2 には、データ製品を提供するための高レベルのインターフェースがリストされています
表 10-2
データ製品開発のサポートとしてプラットフォーム平面が提供する例のインターフェース
開発フェーズ プラットフォーム平面 プラットフォームインターフェース プラットフォームインターフェースの説明
ビルド データ製品の経験/ビルド データ製品のすべてのコンポーネントをコンパイル、検証、および構成し、展開可能なアーティファクトに組み立てます
これにより、データ製品をさまざまな展開環境で実行するために使用できるようになります

このフェーズで使用されるデータインフラストラクチャ平面のインターフェースについては、表 10-3 を参照してください
テスト データ製品の経験/テスト データ製品のさまざまな側面をテストします
データ変換の機能、出力データの整合性、データのバージョニングとアップグレードプロセスの期待値、データプロファイル（期待される統計的特性）、バイアスのテストなどを行います

テストの機能は、異なる展開環境で提供されます
デプロイ データ製品の経験/デプロイ データ製品の構築されたリビジョンを環境にデプロイします
これには、開発者のローカルマシン、ターゲットホスティング環境（特定のクラウドプロバイダなど）の開発サンドボックス、および事前プロダクションまたはプロダクション環境が含まれます
実行 データ製品の経験/開始
/停止 特定の環境でデータ製品インスタンスを実行または停止します
ビルド/テスト/デプロイ/ラン データ製品の経験/ローカル-
ポリシー データ製品の主要なコンポーネントの 1 つは、データと機能を制御するポリシーです
ポリシーには、暗号化、アクセス、保持、ローカリティ、プライバシーなどが含まれます

プラットフォームは、データ製品の開発中にこれらのポリシーの設定と作成を容易にし、テスト中のポリシーの検証、およびデータへのアクセス時の実行を支援します
ビルド/テスト/デプロイ/ラン メッシュ体験/グローバル-
ポリシー 多くの組織では、データ製品を制御するポリシーはグローバル（連邦）ガバナンスチームによって作成されます

したがって、プラットフォームはグローバルポリシーの作成とこれらのポリシーの適用をすべてのデータ製品に可能にします
データインフラストラクチャ平面での詳細をもう少し詳しく見てみましょう
データ製品の構築には多くの要素があります
データ製品開発者は、自律的なデータ製品を実装するためにこれらのすべての部分を構成またはコード化する必要があります
プラットフォームは、これらのコンポーネントのそれぞれをコーディングまたは構成するために必要なコストと労力を削減するための重要なツールです
図 10-4 は、データプロダクトの異なるコンポーネントの構築と実行を、下位レベルのプラットフォームインターフェース、インフラストラクチャプレーン API にマッピングしています
データプロダクトの開発者は、ほとんどの場合、データプロダクトのエクスペリエンスプレーンと対話するだけです
つまり、単一のデータ量子を構築、展開、テストします
データプロダクトのエクスペリエンスプレーンは、データプロダクトコンポーネントの実装をデータインフラストラクチャプレーンに委任します
開発者は、データインフラストラクチャプレーンが提供する技術に基づいて、データプロダクトのさまざまな側面やコンポーネントの理解、コーディング、設定を行わなければなりません
たとえば、データインフラストラクチャプレーンがサポートしている計算エンジンによって、データプロダクトの変換のコーディング方法が異なります
ただし、データプロダクトの開発者は、利用可能な技術を使用して変換のコーディングに焦点を当て、ビルド、展開、変換の実行、および他のすべてのコンポーネントの管理はデータプロダクトのエクスペリエンスプレーンに任せます
このプロセスでは、データプロダクトのエクスペリエンスプレーンは、変換の実行の詳細をデータインフラストラクチャプレーンに委任します
図 10-4
データプロダクトの提供をサポートするデータインフラストラクチャプレーンインターフェースの例表 10-3 では、データプロダクトの開発中に利用されるデータインフラストラクチャプレーンの機能の一部をリストアップしています
表 10-3
データプロダクトエクスペリエンスプレーン
API をサポートするデータインフラストラクチャプレーンインターフェースの例
プラットフォームインターフェースプラットフォームインターフェースの説明
入力ポートデータプロダクトの設計に応じて、イベントストリーミング入力、リモートデータベースクエリ、ファイル読み取りなど、さまざまなメカニズムを提供します
データが利用可能になったときに変換を実行するトリガーです
入力ポートのメカニズムは、新しいデータが利用可能になるにつれて消費の進捗状況を追跡します
/ 出力ポートデータプロダクトが提供するアクセスモードに応じて、ストリーム、ファイル、テーブルなど、さまざまなメカニズムを提供します
/ 変換データを変換するために必要なすべての計算を実行するためのさまざまな実行メカニズムを提供します
/ コンテナデータプロダクトとその必要なインフラリソースのライフサイクルを自律的なユニットとして管理します
/ コントロールアクセス制御、暗号化、プライバシー、保持、ローカリティなど、多様で進化しているポリシーの設定と実行を可能にするさまざまな技術を提供します
/ ストレージ入力ポート、出力ポート、および変換には、データとそれらのメタデータ（SLO、スキーマなど）への永続的および一時的なストレージへのアクセスが必要です
プラットフォームは、異なるタイプのストレージ（ブロブ、関係、グラフ、時系列など）へのアクセス、フェイルオーバー、リカバリ、バックアップ、リストアなどすべての操作機能を提供する必要があります
/ モデルデータの意味と構文のスキーマモデルを記述、共有、リンクするメカニズム
/ ID データ製品をメッシュ上で一意に識別およびアドレス指定するメカニズム
メンテナンス、進化、廃止データプロダクトのメンテナンスと進化には、データプロダクト自体の連続的な変更が関与します
つまり、変換ロジックの改善、データモデルの進化、データへの新しいアクセスモードのサポート、ポリシーの拡充などが行われます
データプロダクトの変更により、データの処理と共有を途切れさせずに継続的にイテレーション（ビルド、テスト、デプロイ、実行）が行われます
プラットフォームは、データプロダクトのメンテナンス方法のオーバーヘッドを最小限に抑える必要があります
たとえば、新しいビルドの結果として意味とスキーマの変更がある場合、データプロダクトの開発者は単純にデータモデルの変更と新しいモデルに基づくデータの変換に焦点を当てます
さまざまなバージョンのスキーマ（意味と構文）の管理、データとの関連付け、および消費者によるアクセスの複雑さは、プラットフォームによって管理されます
一部の場合では、データプロダクトの進化は基礎となるインフラストラクチャリソースに影響を与えません
例えば、変換コードのバグ修正は、データ製品の再ビルドや再展開、生成されたデータの修正が必要です
他の場合では、進化は基盤となるリソースに影響を与えます
例えば、ストレージベンダーの切り替えに伴うデータ製品の新環境への移行では、ストレージリソースの再割り当てとデータ製品の基盤データの移行が必要です
各データ製品とメッシュ全体の運用状態のモニタリングは、このフェーズでプラットフォームが提供するもう一つの重要な能力です
メッシュの運用の優れた性能は、各データ製品の様々な側面のモニタリングに依存します：パフォーマンス、信頼性、SLA、計算ポリシーの有効性、リソース使用に基づいた運用コストのモニタリング
個々のデータ製品のモニタリングに加えて、メッシュの全体的な状態や洞察も収集し、モニタリングする必要があります
例えば、マスターデータ製品が検出されたときにアラートを検出することがあります
これらは多くのソースからデータを集約するデータ製品であり、使用されることでボトルネックになります
データ製品の寿命中には、メッシュレベルの管理コントロールを呼び出す必要がある場合があります
例えば、「忘れられる権利」は、メッシュレベルのグローバルコントロールを介してトリガーされ、個々のデータ製品の制御インターフェースを通じて委任され、基盤ストレージのデータ排除機能を介して実装されることがあります
データ製品は消滅することはあるのでしょうか？私は 2 つのシナリオを考えることができます
データ製品は、新しいデータ製品への移行の場合や、それが生成したデータレコードをすべて廃棄し、新しいレコードが生成されなくなる場合には廃止される可能性があります
いずれの場合でも、プラットフォームはデータ製品開発者がデータ製品を優雅に廃止できるようにするため、下流の消費者が新しいソースに徐々に移行するか、それ自体が退職することができます
過去のデータを使用している限り、データの量子は存在し続けますが、それ以上の変換は行われず、新しいデータは生成されません
休眠中のデータ製品は古いデータを引き続き提供し、ポリシーを強制しますが、完全に廃止されたデータ製品は単に存在しません
表 10-4 には、データ製品のメンテナンス、進化、退職のフェーズをサポートするためのプラットフォームインターフェースのいくつかが示されています
表 10-4
データプラットフォームインターフェースの例　データ製品のメンテナンスをサポートするためのプラットフォーム平面のプラットフォームインターフェースの説明　データ製品の体験/{dp}/status データ製品のステータスを確認するためのもの
データ製品の体験/{dp}/logs
/{dp}/traces
/{dp}/metrics データ製品が実行時の可観測性情報（ログ、トレース、メトリクス）を出力するための仕組み
メッシュレイヤーのモニタリングサービスは、これらのメカニズムが提供するデータを利用します
データ製品の体験/{dp}/accesses データ製品へのアクセスの全てのログ
データ製品の体験平面/{dp}/controls 特定のデータの量子上で「忘れられる権利」などの高権限の管理コントロールを呼び出す機能
データ製品の体験/{dp}/cost データ製品の運用コストを追跡する機能
これはリソースの割り当てと使用状況に基づいて計算されることができる
データ製品の体験/migrate データ製品を新しい環境に移行する機能
データ製品のリビジョンの更新は、ビルドと展開の単なる関数です
メッシュ体験/monitor メッシュレベルでの複数のモニタリング機能、ログ、ステータス、コンプライアンスなど
メッシュ体験/notifications メッシュの異常を検出したときの通知とアラート機能
メッシュ体験/global-controls メッシュ上の複数のデータ製品に対して「忘れられる権利」などの高権限の管理コントロールを呼び出す機能
それでは、データ消費者の旅に注目して、プラットフォームインターフェースがどのように進化してそのようなペルソナをサポートするかを見てみましょう
データプロダクトの消費者ジャーニー

データ消費者のパーソナは、さまざまなスキルセットと責任を持つユーザーの広範な範囲を表しています
このセクションでは、既存のデータ製品を消費して機械学習モデルをトレーニングし、その後機械学習モデルをデータ製品として展開して推論を行い、新しいデータを生成する、データサイエンティストのパーソナに焦点を当てています
例えば、Daff は、リスナーが週の初めにリスナー全員のためにキュレートされたプレイリストを生成するために ML モデルを使用します
月曜日のプレイリストを生成するための ML 推薦モデルは、既存のデータ製品のデータ（リスナープロファイル、リスナープレーリベント、彼らが好きな曲やそうでない曲に対する最近の反応、そして最近聞いたプレイリスト）を使用してトレーニングされます
ML モデルがトレーニングされたら、月曜のプレイリストというデータ製品として展開されます
第 7 章で述べたように、データメッシュは緊密に統合された運用と分析のプレーンを作り出します
ドメイン指向の（マイクロ）サービスとデータ製品を相互に接続します
2 つのプレーン間の緊密な統合とフィードバックループにもかかわらず、データメッシュは各プレーンの責任と特性の違いを尊重し続けます
つまり、マイクロサービスはビジネスを実行するためのオンラインのリクエストやイベントに応答し、データ製品は一時データをキュレート、変換、共有してトレーニング用の機械学習モデルや洞察の生成などの下流の分析用に使用します
2 つのプレーンのエンティティの境界を明確にする試みにもかかわらず、ML モデルはこの境界をぼかします
ML モデルはどちらのプレーンにも属することができます
例えば、ML モデルはマイクロサービスとして展開され、最終ユーザーがリクエストを行う際にオンラインで推論を行うために使用されることがあります
たとえば、新しいリスナーの登録中に、リスナーが提供した情報を元に分類器 ML モデルが呼び出され、ユーザーの情報にプロファイル分類を追加します
また、ML モデルはデータ製品の変換ロジックとして展開されることもあります
たとえば、プレイリストの推奨 ML モデルは、毎週推論を行い新しいプレイリストを生成するデータ製品として展開されます
このデータは、プレイリストをリスナーに表示する運用サービスに供給することができます
図 10-5 はこの例を示しています
図 10-5
ML モデルのバイモーダルな展開の例
このセクションでは、データサイエンティストがデータメッシュプラットフォームの機能との重なりを示すために、データ製品として展開される ML モデルのジャーニーに焦点を当てています
図 10-6 は、継続的に ML モデルをデータ製品として提供するための高レベルなジャーニーを示しています
この価値ストリームは、機械学習のための継続的なデリバリー（CD4ML）の実践に従って、反復可能なプロセスでモデルを仮説化、トレーニング、展開、監視、改善することで、迅速なフィードバックループで行われます
3 図 10-6
モデル開発のジャーニーの例
データプラットフォームの観点からは、このジャーニーは以前に探求した「データプロダクト開発者のジャーニー」と非常に似ています
次に、いくつかの違いがあります
インセプト、エクスプロア、ブートストラップ、ソース
この例では、ML モデル開発者は、最終的にモデルに埋め込まれるデータ製品のインセプトから旅を始めます
このデータ製品の発端には、既存のデータに基づいた賢明なアクションや意思決定のための仮説の策定が含まれます
たとえば、多くのリスナーが再生して繰り返し再生（好き）するプレイリストをキュレーションして推奨することは可能でしょうか？ 仮説を検証するための探索を開始するために、ML モデル開発者は既存のデータ製品を探索し、ディスカバリ API やサンプリング出力ポートデータを使用してソースを評価します
このフェーズでは、プラットフォームのインターフェイスは以前に紹介したものと同じです
ここでの主な違いは、データサイエンティストが関心を持つ探索情報のタイプかもしれません
データのバイアスやデータの公平性を評価する必要があります
これは、ソースデータプロダクトの出力ポートのサンプリングとプロファイリングによって評価することができます

ビルド、テスト、デプロイ、実行
モデルの構築とトレーニングは、上流データプロダクトの出力ポートを使用して行われます
トレーニング中、モデル開発者はトレーニングデータセットに変更が必要であると判断する場合、上流データプロダクトのデータを特徴に変換します
例えば、トレーニング特徴は、プレイリスト情報の一部と曲のプロファイルが結合されたものだけを含むことがあります
この場合、特徴を生成するためのデータ変換パイプライン自体がデータプロダクトとなります
例えば、月曜のプレイリスト特徴は他のどのデータプロダクトと同様に開発されるデータプロダクトとなります
このフェーズでは、モデル開発者はモデルの特定のリビジョンに結果をもたらすデータの追跡が必要です
ソース（トレーニングおよびテスト）データのバージョニングは、すべてのデータプロダクトによって公開される処理時間パラメータを使用できます
このパラメータはデータのリビジョンを示すものであり、データの処理および公開が行われた日時を示します
これにより、将来の再利用とモデルの繰り返し可能性のためにデータのコピーを保持する必要がなくなります
なぜなら、ソースデータプロダクトは常に過去のデータを取得することができるからです
第 12 章でこの詳細を説明します
モデルのトレーニングと追跡のプロセスは、ML プラットフォームによって処理されることがあります
これは、ML モデルのトレーニングパイプラインの特別なニーズを満たすための技術とツールのプラットフォームです
これらのサービスは、データプラットフォームと密接に連携して動作します
デプロイ時には、モデルを月曜のプレイリストデータプロダクトの変換コードとして実行できる形式にパッケージ化する必要があります
モデルの実行中、インフラストラクチャ面の変換エンジンは、ML モデルの実行に関する固有のニーズ（例：ターゲットとなるハードウェアでの実行 - GPU または TPU）を処理できます
保守、進化、引退モデルと同様に、開発者はモデルのパフォーマンスを監視し、出力データであるプレイリストが予想どおりに作成されているかを確認します
モデルの監視の特別なニーズの一つは、モデルの実効性を観察し、リスナーが行うアクションを監視することです
例えば、モデルの新しいリビジョンはプレイリストの再生時間の増加、リプレイの増加、リスナーの増加に結果をもたらすでしょうか？そのようなパラメータの監視には、操作面のメトリック監視の機能を利用することがあります
この場合、プレーヤーアプリケーションがこれらのメトリックを提供できます

まとめ
この章から一つだけ心に留めていってほしいことは、プラットフォームのような単一のエンティティは存在しないということです
各ステップで必要な API、サービス、SDK、およびライブラリがあります
データプロダクト開発者や消費者などのプラットフォームユーザーの旅は、データメッシュプラットフォームサービスにとどまることはありません
彼らはしばしば、マイクロサービスからデータを消費するためのストリーミング能力を提供する API や、実験の追跡や GPU の利用など、ML モデルトレーニングの能力を持つ API との境界を越えます
したがって、プラットフォームを、ユーザーにとってシームレスなエクスペリエンスを提供するためのよく統合されたサービスのセットと見なしてください
2 つ目のポイントとして、ヒューマンエクスペリエンスと機械効率の両方を最適化するために、プレーンの分離を尊重することです
例えば、データプロダクトのエクスペリエンス面を使用して、データ量子の単位との論理的なレベルでユーザーエクスペリエンスを最適化する
データの計算とストレージを分離するなど、マシンの最適化のために別個のデータインフラストラクチャプレーンを作成する
下位のプレーン最適化の決定は、開発者エクスペリエンスに支障をきたしてはなりませんし、逆もまた然りです
データメッシュプラットフォームを作成するための最初のステップで、最も小さな摩擦と最大の喜びと関与をもたらすような、データ製品開発者やデータ製品の消費者などの役割のための最適な旅の発見と設計から始めることが理想です
それが完了したら、彼らの旅のさまざまな段階に適したツールを見つけるために、自由に検索を続けてください

## まとめと感想

- 少し難しかったが考えられる 4 つのレイヤーのプラオットフォームの話なので実際の実装する時は参考にすべきところ
- API のエンドポイントがめっちゃ出てきたが、これが標準にすべきものだし、おそらく、プラットフォーム利用者が利用するだけで自動で作成されるようになっているべきエンドポイントだと認識

- 相当多いイメージなので、どこからやっていくのか、どれくらいマネージドな仕組みを使って、どのくらい自作すべきなのかは考えたいところ
- ただ、このようにエンドポイント作成を自動化してあげればエンドポイントの標準化やエンドポイントの自動登録ができるのでめっちゃいいと思う
- このプラットフォームを出すことで、そのプラットフォームにめっちゃ依存したプロジェクトになってしまうことや、そもそももうすでにデータ基盤を持っているところの邪魔にならないアーキテクチャ七日は気になる
  - おそらく、今すでに API などがある想定をしていたので問題ないと思う
  - おそらく、既存のものに上から被せたり、繋げたりするだけなので、身軽なはず
  - この実装がめちゃくちゃ簡単ですよ、であれば中央のデータウェアハウスとかにしなくても良さそう


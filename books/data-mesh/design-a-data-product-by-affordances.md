データメッシュアーキテクチャの一部であるデータプロダクトのデザインは、おそらく最も重要な要素です（「データプロダクトとしてのアーキテクチャ量子」）
これはデータメッシュに固有のアーキテクチャ要素であり、以前の手法や学習を基にしているものの、それらから逸脱しています
本のこの部分では、アーキテクチャの文脈でデータプロダクトの設計が焦点の場合、データ量子という略語を使用し、それをデータプロダクトと同義で使用します
データメッシュは、分散スケールアウトアーキテクチャとして、データプロダクトを自己完結型、自律的、対等なノードであるデータ量子として設計します
各データプロダクトは、自立性を持つように設計され、ユーザーや開発者に必要なすべての機能を提供します: それらを発見し、理解し、使用し、構築し、管理し、デバッグする能力です
そのため、本の一部が自己完結型のデータプロダクトの設計方法について取り上げています
ソフトウェアアーキテクチャの基礎では、次の要素をアーキテクチャの構成要素として定義しています:構造、コンポーネントとそのインターフェース、相互作用、統合能力、拡張性、信頼性などの特性、デザインを支配する厳格なルールの決定、意思決定を影響するガイドラインとなる原則
さらに、私はもう 1 つの要素、つまりアフォーダンスについて紹介し、重点を置きます
アフォーダンスとは、データプロダクトのインターフェースと人々（またはシステム）が相互作用する方法の関係であり、例えば、データ製品がユーザー（プログラム）に接続し、出力に購読し、データを連続的に受け取ることを提供する方法や、データユーザーがデータを発見し、理解し、データを調査する方法などです
私は、このアフォーダンスに基づいたデータプロダクトアーキテクチャの設計方法を呼びます
この章を読み進めることで、データメッシュ思考と互換性のあるデータプロダクトアーキテクチャの設計方法を学ぶことができます
私の希望は、このアプローチを取り入れ、本のこの部分で紹介した要素を超えて、データプロダクトの設計に適用していただくことです
これは一つの思考方法とアーキテクチャモデリングの方法であり、独自の状況に適応させることができます
私はあなたにロープを見せますが、船を進めるのはあなたです
データプロダクトのアフォーダンスとは、認知工学の父であるドン・ノーマンが「日常のデザイン」という本で指摘するように、相互作用の 5 つの基本原則の 1 つです
彼は次のように説明しています
「アフォーダンス」という言葉は、物理的な対象と人間や他の相互作用するエージェント（動物や人間、機械やロボットなど）の関係を指します
アフォーダンスとは、物体の特性とエージェント（つまり、どのように物体を使用できるかを決定する能力を持つエージェント）の能力との間の関係です
椅子は支持を提供しますので（「座る」ことを可能にし）、それゆえに座ることができます
ほとんどの椅子は一人で持ち運ぶこともできます（持ち上げることができます）、しかし一部の椅子は強い人やチームによってのみ持ち上げることができます
若い人や比較的弱い人が椅子を持ち上げることができない場合、彼らにとってはその椅子にはそのアフォーダンスがなく、持ち上げることができないということです
アフォーダンスの存在は、物体の特性と相互作用するエージェントの能力によって共同で決定されます
アフォーダンスの関係性の定義は多くの人にとって困難です
私たちは物件と特性が関連付けられると思っていますが、アフォーダンスは特性ではありません
アフォーダンスは関係性です
アフォーダンスが存在するかどうかは、物体とエージェントの両方の特性に依存します
なぜデータプロダクトのインターフェースと機能の設計においてこれが重要なのでしょうか？
それはデータプロダクトの各特性、例えば、バイテンポラルデータを提供する（「バイテンポラルデータ」）については、その特性と相互作用する主体、つまり時に敏感な主体についての仮定がなされているからです
これらの制約と制約は、affordance によって定義される分散システムを誠実かつ信頼性を持って動作させるために必要です
あなたは基本的に、データメッシュエコシステムの他のエージェント（データプロバイダ、消費者、所有者、ガバナンス、データプラットフォームのサービスや他のデータ製品などのコンポーネント）との関係を調べながら、データ製品を設計しています
ほとんどの場合、これらの affordance は、データ製品の特性と機能と他のエージェントとの関係性を考えることができます
ただし、どのエージェントがどのような特性を提供し、提供しないかを考慮してください
図 11-1 には、エコシステム内の他のデータに接続できる意味のある、理解しやすい、信頼できるデータを自律的に変換して提供するためのデータ製品の affordance がリストされています
ここでの「自律的」という言葉は、他のデータ製品に影響を与えることなく、そのライフサイクルを独立して管理できることを意味します
その仕事を行うための構造的なコンポーネントを持っています
他のデータ製品やプラットフォームサービスとの依存関係は、明示的な契約がある API を介して行われ、緩やかな結合が作成されます
図 11-1.データ製品の affordance 注以下の文脈では、「データ製品のユーザー」というフレーズは、データ製品エコシステム内のすべての対話エージェントを指します
これには、データ製品開発者、データ製品所有者、データ製品消費者、ガバナンスグループなどの人々や、他のデータ製品やマルチプレーンデータプラットフォームのサービスなどのシステムも含まれます
表 11-1 は、各提供の要件を要約し、それらについて詳しく議論するための章への参照を提供します
Table 11-1. データ製品の提供要件データ製品の提供要件の説明「サーブデータ（Chapter 12 の「サーブデータ」）」データ製品は不変で Bitemporal なデータを共有し、複数のアクセスモードをサポートする明確に定義された読み取り専用インターフェースを介して利用できます
データ製品は、データ製品の多様なユーザーが機械学習モデルのトレーニング、レポートの生成、データの分析と探索、データ主導アプリケーションの構築のためにデータにアクセスすることを提供します

データの状態を維持するためにデータを更新または削除することを必要とするトランザクションおよびオペレーションアプリケーションは提供しません
「データの消費（Chapter 12 の「データの消費」）」データ製品はさまざまなタイプの上流ソースからデータを消費します
データ製品は、協力するオペレーションアプリケーション、他のデータ製品、または外部システムからデータを消費することを提供します

データ製品は、それが識別し、設定するソースからのデータの消費を提供しますが、識別および設定するソースからのデータの消費を提供しません
「データの変換（Chapter 12 の「データの変換」）」データ製品は、入力データを処理および変換して新しいデータを生成し、それを提供します

データ製品は、データ製品開発者が複数の変換計算モードを持つものとして提供します
変換はプログラムコード、機械学習モデル、または推論を実行する複雑なクエリのいずれかで行うことができます

変換によって新しいデータが生成されるか、入力データの品質がリモデルされまたは改善されることがあります
「発見|理解|探索|信頼（Chapter 13 の「発見、理解、信頼、探索」）」データ製品は、データ製品のユーザーが発見、探索、理解、信頼するための API と情報を提供します
「データの構築（Chapter 13 の「データの構築」）」データ製品は、データ製品のユーザーが他のデータ製品とそのデータを組み合わせ、相関関係を持たせ、結合させることを提供します

データクォンタムは、セット（テーブルまたはグラフ）演算を計算的に実行することにより、プログラムによるデータの組み合わせを可能にします

データ製品は、単一で緊密に結合されたデータスキーマ（SQL スキーマなど）を要求するシステムにデータの組み合わせを提供しません
「ライフサイクルの管理（Chapter 14 の「ライフサイクルの管理」）」データ製品は、データ製品のユーザーがそのライフサイクルを管理することを提供します

データ製品開発者がデータ製品をビルド、プロビジョニング、およびメンテナンスするためのビルドタイムおよびランタイムの設定とコードのセットを提供します
監視 | デバッグ | 監査（第 14 章の「監視、デバッグ、および監査」）データ製品は、データ製品のユーザーがその動作を監視し、問題をデバッグし、監査することができます

データ処理ログ、系譜、ランタイムメトリックス、アクセスログなどの必要な情報を提供するためのプログラム API を提供します
ガバン（第 14 章の「ガバンデータ」）データ製品は、ガバナンスグループ、データ製品の開発者、およびメッシュエクスペリエンスプレーン（管理およびポリシーコントロール）に対して、データを自己制御するための一連の API と計算上のポリシーを提供します

データへのアクセス時にそのガバニングポリシーのビルドタイム構成を可能にし、それらの実行時実行を可能にします
例えば、データへのアクセスを制御することによってデータのセキュリティを維持し、暗号化によってプライバシーと機密性を保護します
データ製品のアーキテクチャの特徴は、すべてのデータ製品の設計が共有する一般的なセットです
これらの特性に基づいて、データ製品の設計を評価し、データメッシュの目標である「大規模なデータからの価値を得る」ことが達成されるかどうかを確認できます
変更のための設計変更データとそのモデルは、データ製品の必須の設計特性です
以前の章で説明したように、変化に対する優雅な対応は、データメッシュの目標であり、すべてのデータ製品によってサポートされる特性です
例えば、データ製品のさまざまな側面を API でフロントエンドにする設計上の決定は、変更をより管理しやすくします
また、データ製品のさまざまなパラメータの変更を容易にするために、データのスナップショット、データモデルのスナップショット、SLO の時間など、時間を属性として追加する例もあります
デフォルトでは、すべてのデータ製品のアーティファクトとデータは時間の概念を使用してバージョン管理されます
拡張のための設計は、変更の特性の一部と見なすことができます
データ製品の機能は、時間とともに進化し成熟します
たとえば、データ製品が最初の日にはファイルを介した単一のアクセスモードのみをサポートし、後でイベントとテーブルをサポートするように進化することがあります
これは、データ製品が拡張可能な設計を持つことを意味します
協調サイドカーやエージェントのような緩やかに結合されたコンポーネントは、拡張性を向上させます
新しい機能と共に拡張することができ、データ製品にデプロイまたは実行時に注入することができますが、静的リンクまたは共有ライブラリは提供可能になるためにデータ製品の再構築が必要になります
スケールのための設計データ製品の設計は、スケールアウトメッシュの結果でなければなりません
メッシュは、データ製品の追加、データソースの数の増加、データユーザーの多様性と数の増加に伴い、引き続きデータへのアクセスの迅速性と変更の俊敏性を維持しながら拡大する必要があります
同期、調整、またはアクセスの集中化のポイントは、このトレードオフに悪影響を及ぼす可能性があります
それがデータ製品が自治的である理由です
たとえば、データ製品の実行コンテキストでアクセス制御やその他のポリシーを強制する設計上の決定は、スケールアウトのアーキテクチャ上の決定です
また、データユーザーとデータ製品の間に中央ゲートウェイを使用してアクセスを制御する場合、時間の経過とともにボトルネックになる可能性があります
価値のための設計データ製品の設計は、最小限の摩擦で消費者に価値を提供することを重視しなければなりません
これは非常に明らかであり、また冗長なように思えるかもしれませんが、ソフトウェアエンジニアリングの物語は、価値の提供にあまり役立たない賢明な設計で散在しています
データ製品のインターフェースの設計は、ユーザーと簡単に理解できる、信頼性のある、安全なデータを、最小限の手続き、チェック、介入で共有することに焦点を当てる必要があります
たとえば、データの二重時間軸は、分散システムでデータの整合性と信頼性を維持し、推論するために必要ですが、多くのユーザーは日常の使用では時間には関心がありません
データ製品は内部で二時的性を維持しているが、デフォルトで「現在」や「最新」を想定して時間の概念を簡略化するショートカット API を提供することがある
複雑な適応システムのシンプルさに影響を受けたデザインデータメッシュのようなアーキテクチャは、複雑な適応システムと共通の特性を持っている
それは、動的な相互接続を持つ自律的な自己組織化エージェントのネットワークで構成されている
複雑な適応システムからのインスピレーションを受けることによって、アーキテクチャの設計には 2 つの方法で影響を与える

シンプルなローカルルールからの出現行動まず、強力なグループの行動が、ローカルにある各エージェントを統治する簡単なルールのセットから生じるという事実からインスピレーションを得ることができる
たとえば、秋の空に数千匹のスズメバチが美しく同期した群れが現れるのは、すべてのスズメバチが 3 つのシンプルなルールに従っているからです
1 つ目は「分離」（近くの仲間と衝突しないようにする）、2 つ目は「整列」（近くの先導仲間に従う）、3 つ目は「凝集」（近くの仲間と同じ速度で移動する）です
鳥たちはグローバルなオーケストレーターも全体の知識も不要です
同様に、データメッシュは、各データ製品に対して小さな単純な特性と行動規則を定義することで、グループの強力な行動がメッシュから生じます
たとえば、各データ製品は、その直近の上流ソースから入力データをどこから、どのように消費するかを定義し、出力データをどのように共有するかを定義します
データ製品は、他の上流データ製品の出力ポートに接続するための入力ポートを定義することができます
入力ポートと出力ポートは、各データ製品によってローカルに設定されたデータフロー構成を定義します
このローカルなデータフロールールから、メッシュ全体の系譜グラフが生まれます
この場合、データフローグラフや系譜の中央集権的な定義はありません
データ製品は、メッシュ全体の知識を持っていません
パイプラインの中央オーケストレーターも、グローバルな設定を把握しているわけではありません
これは、既存のデータパイプラインの設計とは異なり、中央オーケストレーターがすべてのパイプラインの設定を集中管理している場合です
ローカルなデータ製品レベルのルールから、他の例として、グローバルな知識グラフやデータ製品の意味とその直近のノードとの関係、および各データ製品が提供するローカルの指標とログに基づいたメッシュレベルのランタイムパフォーマンスなど、出現するメッシュレベルの特性があります
これらの出現する特性と行動は、データプラットフォームのメッシュエクスペリエンスプレーンサービスを介して表面化することができます
中央のオーケストレーターデータメッシュは、複雑な適応システムと同様に、中央の制御的なアーキテクチャ要素を必要としません
鳥の群れにはオーケストレーターはいませんが、速度、距離、リーダーの検出方法を定義する一連の生物学的基準を持っています
同様に、データメッシュは、相互運用性と行動の結束のために、各データ製品が従う一連の標準を導入しています
たとえば、第 10 章で「グローバルポリシー」をメッシュエクスペリエンスプレーンが提供するサービスとして紹介しました
このサービスでは、各データ製品のアクセス制御ルールを簡単に設定できます
ただし、ルールの解釈と実行は、中央のアクセス制御機関の介入なしに、データ製品内で適切なタイミング（読み取りまたは書き込み）でローカルに行われます
一部の組織では、ルールの作成自体も分散化されてローカルでデータ製品に委任されています
ただし、プラットフォームは各データ製品に統一した解釈と実行のための標準化されたサイドカーを埋め込んでいます
まとめこれまでに、データメッシュアーキテクチャの核となる要素であるデータ製品の設計に向けたマインドセットとアプローチを確立できたことを願っています
最初に、データ製品とメッシュの他のコンポーネントやユーザーとの関係、データ製品の利用可能性（データ提供、データの消費、データの発見、データのガバナンス、データの監査など）を見ることで、適切な設計にたどり着きます
次に、スケールアウトアーキテクチャを設計し、他を壊す心配なく変更できる同等のデータ製品を作成します
これらは集中的なボトルネックを回避し、価値の提供に焦点を当てた設計を行います
また、可能な限り複雑な適応システムの原則を適用します
各データ製品には単純でローカルなルールや行動を設計し、メッシュレベルの知識とインテリジェンスの出現につなげます
この新しいマインドセットを持って、次の数章でデータ製品の利用可能性の設計を進めましょう

## 感想とまとめ

- あんまりわからなかったが、データ製品が他とどの様にやり取りされるべきか、やりとりしやすい様になっているべきかみたいな話？
- 自立性が大事だけど、ある程度の標準化は大事で、SideCar 的に差し込むことができたら緩い結合でいけるよねってこと？
  - ここら辺はまじで K8s って感じだろうな
  - SideCar 強制化とか CustomContorller とか Istio,DaemonSet とか
  - 逆にこれ以外の方法で差し込める方法ってあるのかな？


---
marp: true
---

# DataMesh まとめと今後について

---

## 目次

- 本資料の目的
- データ活用について
- 従来型データ活用基盤について
- DataMesh について
- DataMesh を実現するための考え方/役割/手段
- 考察/今後の展望

---

# 本資料の目的

---

## 本資料の目的

[こちらの本](https://www.amazon.co.jp/-/en/Zhamak-Dehghani-ebook/dp/B09V4KWWJ8/ref=sr_1_1?crid=3PCPAQ4MKVW2X&keywords=datamesh&qid=1705707189&s=english-books&sprefix=datamesh%2Cenglish-books%2C220&sr=1-1)で記載されていた内容について共有し,以下を達成すること

- データ活用の必要性やポイントについての視点を共有する
- DataMesh とは何か, どのようなメリットがあるのかを理解してもらう
- 今後どのようにデータ基盤のプロジェクトを進めていくかの判断材料にしてもらう

---

# データ活用について

---

## そもそもデータ活用とは

データを活用して**価値を生み出すの**がデータ活用の目的

データ活用で創出される価値の一例

- 顧客ニーズの発見
- 顧客の行動予測
- 在庫最適化
- AI による自動化範囲の拡大
- などなど...

---

## データ活用の重要性

変化が激しく,複雑で,不確実な時代においてデータ活用が企業価値に大きく影響する

- 人のカンコツでは変化に対応できない
- データなしでは顧客のニーズを把握できない
  - 顧客に価値を提供することが企業価値のはず！！
- 独自で AI を開発できないと,自動化範囲の拡大ができない
  - AI のすごいところは,ルールを定義しなくても自動でルールを学習してくれるところ
    - 従来のシステムが採用しているルールベースでは定義できなかった領域も自動化できるようになる
  - 自動化は高度な企業戦略に集中するための最重要技術(だと私は思う)

---

## データを価値に変えるためには

仮説,検証,収集/分析,行動のサイクルを**頻繁に繰り返して**価値創出の**精度を上げていくことが重要**

- データを貯めて終わりじゃない
- 仮説を立てて検証して,収集/分析して,行動して,また仮説を立てて...
- 変化の激しい時代では変化を受け入れられること,受け入れていくことが重要

---

## データが価値に変わるためには

- データそのものが **意味のあるもの(解釈可能)** である必要がある
  - Garbage in, Garbage out
    - ゴミを入れてもゴミしか出てこない!!
  - データに価値があるものでも,解釈を間違えて利用すると価値がなくなる
- 単一ではなく複数のデータを組み合わせる必要がある
  - 複雑な世界を単一のデータで解釈することはできない
  - 複数のデータを組み合わせて解釈することで,新たな価値を創出できる

---

## 重要な注意事項

データ保護や法律にも注意する必要がある

- GDPR
- CCPA
- 忘れられる権利
- などなど...

この領域の変化も激しい

### セキュリティや法対応はデータ活用の目的ではなく前提条件

---

## データ活用のまとめと必要なデータ活用基盤について

### まとめ

- データ活用が企業価値に大きく影響する
- データを価値に変えるためには,仮説,検証,収集/分析,行動のサイクルを頻繁に繰り返して価値創出の精度を上げていくことが重要
- データが価値に変わるには,
  - データそのものが意味のあるもの(解釈可能)である必要がある
  - 単一ではなく複数のデータを組み合わせる必要がある

### つまり,データ活用を支えるデータ活用基盤は...

- **変化に対応できる柔軟性やアジリティが必要であること**
- **データの意味が容易に理解できること**
- **複数のデータを組み合わせることが容易であること**

---

# 従来型データ活用基盤について

---

## 従来型データ活用基盤概要

- 従来は中央集権型のデータ基盤が主流
  - 現在も多くのデータ基盤は中央集権型と思われる
- 組織の中心にデータレイクやデータウェアハウスなどのデータ基盤があり,そこにデータを集めている
- 中央チームがデータアクセス制御やデータ品質管理を行っている

  - データ品質管理のための ETLPipeline などを中央チームが作成,管理
  - データのカタログ化やタグ付け,メタデータ付与なども中央チームが行う

---

## 従来型データ活用基盤のイメージ

![width:800](https://martinfowler.com/articles/data-mesh-principles/data-warehouse.png)

---

## 従来型データ活用基盤の特徴

- データが全て集約されていればデータを探すのが簡単
- データを中央に送信すること自体は簡単
- データオーナが中央データを管理する必要がない
- データオーナが ETL Pipeline を作成する必要がない
- 技術レイヤーによって組織や仕組みの分割を行っているアーキテクチャ
  - 各部署
    - データソース
  - 中央データチーム
    - データパイプライン
    - データレイク／データウェアハウス
  - 分析者
    - BI ツールなど

---

## 従来型データ活用基盤の問題点

データが複雑かつ変化しやすい現代では,従来のデータ活用基盤は以下のような問題が生じる可能性がある

- 中央集権なので,変化への対応やアジリティの確保が難しい
  - 変化に対応するために,中央チームが変更を行う必要があり,アジリティが低い
- データの意味合い(コンテキスト)の保持が難しい
  - 中央チームの人が他チームのデータを理解してデータ処理するのは難しい
    - データの意味を理解するにはドメイン知識が必要
  - データ活用で使えそうなデータは**とりあえず全て中央に入れておこう,という考えは Garbage in, Garbage out になりうる**

---

## 再掲 データ活用のまとめとデータ基盤について

- データ活用が企業価値に大きく影響する
  ...

つまり,データ活用を支えるデータ基盤は以下の点に注意する必要がある

- 変化に対応できる柔軟性やアジリティが必要であること
- データの意味が容易に理解できること
- 複数のデータを組み合わせることが容易であること

**中央集権な従来型ではいつか限界がきそうな予感...**

## そこで DataMesh!!

---

# DataMesh について

---

## DataMesh 概要

- 自律分散型のデータ活用基盤
- 分散型なので,ドメイン毎の独立した成長が可能
- データオーナが責任を持ってデータを公開する

  - Data as a Product(データ製品)という原則を採用している
  - データオーナがデータ製品としてデータを公開することで,**データの意味合いが明確になる**

- ドメインによって分割を行っているアーキテクチャ
  - 空調
  - 化学
  - IT
  - 人事など

---

## DataMesh イメージ

![width:600](https://martinfowler.com/articles/data-mesh-principles/data-product-example.png)

- 各ドメイン毎にデータ管理の仕組みがある
- 各ドメインは Operational API と Analytical なデータ製品を公開している
- 他ドメインのデータを自ドメインの input として利用することができる

---

## DataMesh を採用すれば...

- 変化に対応できる柔軟性やアジリティが必要であること
  ->ドメイン毎に独立しているので変化に対応しやすい
- データの意味が保持されていること
  ->データオーナがデータ製品としてデータを公開することで,データの意味合いが明確になる
- 複数のデータを組み合わせることが容易であること
  ->他ドメインのデータを自ドメインの input として利用することができる

## いい感じ！！

---

## 本当か？

前のページはすべてがうまくいった場合の話

分散型特有の課題に真剣に向き合って,解決しないことには達成が難しい

---

## 分散型で解決しなくてはいけない課題

- データの発見性
  - データが分散しているので,どこにあるのかわからない
- データの相互運用性
  - 分散型は様々な input,output のインターフェイスが生まれやすく,それらを相互運用できるようにする必要がある
- 実装の重複
  - データ自体と基盤
- セキュリティや法対応などのガバナンス
  - 各ドメインに任せて問題ないわけない

などなど

---

## DataMesh の 4 原則

分散型のメリットを享受しつつ,分散型の課題を解決するための 4 原則がある

### 1. Principle of Domain Ownership

### 2. Principle of Data as a Product

### 3. Principle of Self serve Data Platform

### 4. Principle of Federated Computational Governance

---

## 1. Principle of Domain Ownership

- ドメインチームがデータに対して責任を負うという原則
- 運用データから分析データの変換 ETL 処理はドメインチームが責任を持って行う
- ドメイン知識のあるデータオーナがデータの意味を加味して提供することで,データが価値に変わる

---

## 2. Principle of Data as a Product

- ドメインチームがデータを製品のように公開するという原則

  - 製品の意味合いデータ品質の話をしていると認識した

- データ消費側がデータを消費する際に,データの意味を理解しやすくなる
  - 結果,データを価値に変えることが容易でスピーディで確実になる

---

## 3. Principle of Self serve Data Platform

- 上２つの原則を実現するにはドメインチームが莫大な技術的負担を負うことになる

- そこでドメインチームがデータを公開するためのプラットフォームを提供する必要がある

- 全ドメインで相互運用可能なデータ製品を構築,実行,維持するための**ドメインに依存しない機能,ツール,システム**を提供する

---

## 4. Principle of Federated Computational Governance

- 連合のガバナンスグループが識別子やアクセスポリシー,一部のメタデータなど,標準化するべきところを標準化し,全てのデータ製品の相互運用性を実現する
  - 標準化する項目はどのドメインにも依存しないものが好ましい
- また組織のルールと法規制などの業界の規制を遵守するためのガバナンスを実施する
- この取り組みの主なメンバーは,各ドメインの代表者,プラットフォームチーム,セキュリティチーム,法務チームなど

---

## DataMesh に関するまとめ

- DataMesh は分散型のデータ活用基盤
- ドメインチームがデータに対して責任を負うことで,アジリティや変化への対応,データの意味合いを確保することが容易になる
- 分散型のメリットを享受しつつ,分散型の課題を解決するための 4 原則が提示されている
  - Principle of Domain Ownership
  - Principle of Data as a Product
  - Principle of Self serve Data Platform
  - Principle of Federated Computational Governance

---

# DataMesh を実現するための考え方/役割/手段

---

## DataMesh を実現するための考え方

- ４原則を実現するためには以下の要素が必要

  - データ製品文化の醸成／教育
  - プラットフォームの継続的な開発／導入
  - Federated Computational Governance チームの設立

- **小さく確実に継続的に**進めることが重要

  - 開発が終わるのは DataMesh に対する要求がなくなった時

- 会社のドメインに関わることなので,外部ベンダーに丸投げではうまくいかない
  - ベンダーに丸投げするなら中央集権型がよい

---

## DataMesh を実現するための手段

- DataMesh を実現するための考え方/役割/手段

---

## インフラ Gr が関連する原則

- インフラ Gr が大きく関連する原則は以下の 2 つ

  - Principle of Self serve Data Platform
  - Federated Computational Governance の一部

- 今回は Principle of Self serve Data Platform について掘り下げていく

---

## Principle of Self serve Data Platform

ドメインチームがデータを公開するためのプラットフォームを提供すること
カバレッジはとても広く,以下はその一例

- データ製品の発見容易性を担保する API 基盤
  - データ製品がこの基盤に強制登録されるような仕組みも必要
- データを相互接続するための基盤(input/output port)
  - 様々な口が必要(データベース,ストリーミング,API,メッセージキューなど)
- データ製品をデプロイするための CI/CD 基盤
- データの品質を担保する ETL 基盤
- データのセキュリティやアクセスポリシーを宣言的に実装できる基盤
- データアクセスやデータの品質をモニタリングする基盤
  などなど(本書には包括的に書かれているので何回でも読み直す必要あり！)

---

## データ製品

- アーキテクチャ粒子として紹介されていた

  - 独立してデプロイでき、機能に必要な構造要素が全て含まれている最小単位

- 一つのデータ製品は以下のような構成になるため、このデータ製品を簡単に構築できるようにする必要がある

- 図:9-2

---

## Self serve Data Platform の役割と構成

Self serve Data Platform は、データメッシュのユーザーが様々なジョブを行うためのさまざまなサービスを提供する

- データプロデューサー（データ製品開発者、データ製品オーナー）
- データコンシューマー（データアナリスト、データサイエンティスト）
- データガバナンスメンバー

そのために３つのデータプレーンとデータ製品を作り込める仕組みを提供する

1. Mesh Experience Plane
1. Data product experience Plane
1. Infrastructure utility Plane

---

## マルチデータプラットフォームプレーンのイメージ

図:9-12

- プレーンはレイヤーのように厳格ではないらしい
- プレーン間には依存関係があるが、それを利用する人はどのプレーンを利用しても良い
  - 低レベルなプレーンから使っても良いし、いきなり高レベルなプレーンから使っても良い

---

## Mesh Experience Plane

このプレーンは、複数のデータ製品で動作するメッシュレベルの機能を抽象化します
例えば、メッシュ上でのデータ製品の検索や、入力と出力のデータ製品の間の関連(リネージ)を横断して複数のデータ製品を処理するなどの操作をサポートしています

---

## Data product experience Plane

これは、インフラストラクチャプレーンを使用してデータ製品を構築、維持、消費するための高レベル抽象化です
このプレーンのインターフェースは、データ製品と直接連携します
たとえば、データ製品開発者がデータ製品のライフサイクルを管理するのに役立ちます-データ製品の構築、データ製品の展開など
また、データ製品の消費者がデータ製品を使用するのにも役立ちます-データ製品の出力に対してサブスクライブしたりデータを読み取ったりするなど

---

## Infrastructure utility Plane

このプレーンは、メッシュを構築および実行するための低レベルのインフラストラクチャリソースの管理を担当します
たとえば、ストレージ、コンピューティング、アイデンティティシステムなどです
これは、デジタルアプリケーションインフラストラクチャと統合し、重複する部分もあります
例えば、データインフラストラクチャは、ドメインチームがアプリケーションを開発するために使用するデータ製品の CI/CD エンジンと共有することができます
別の例として、分析システムと運用システムの両方に対するオブジェクトストアのような共通のストレージタイプの管理が挙げられます

---

## データ製品を作りこむイメージ

図:9-4

- input,output port を作成する
- データ発見や監視の仕組みを作成する
- 連合チームで定めたポリシーを Sidecar でデータ製品に実装する

---

# すでにアプリケーションとして動いている運用データを DataMesh に載せて分析用データとして活用できるようにプラットフォームを構築する

データメッシュは、エンタープライズアーキテクチャの既存の側面を変えるわけではありません
それは単にその存在を認めるだけです
一部の場合では、データメッシュは運用インターフェースを使用してデータ製品を作成します

---

# Platform のやり方

データプロットフォームにはクロスファンクションのドメインチームがデータプロダクトを自律的に管理し、データユーザーが複数のデータプロダクトを発見し、学習し、利用できるようにし、それらを安全に管理し、メッシュポリシーに準拠させる必要がある
このようなプラットフォームを設計するための一般的なアプローチには、1 つの統合されたプラットフォームを採用する方法（通常はメインベンダーから購入する方法）と、標準的かつオープンなインターフェースを公開する一連の緩く統合されたサービスを使用する方法（異なるベンダーからのビルドとバイの組み合わせとして実装されることが多い）の 2 つがあります
データメッシュプラットフォームの設計は、後者のグループに属しています
これは、複雑なプラットフォームをその機能ごとに分割し、オープンなインターフェースを介して他の連携機能と統合することを重視しています
1 つのプラットフォームのアイデアは魅力的ですが、1 つのベンダーとやり取りする方が簡単ですが、スケールに制限があります
例えば、1 つのプラットフォームでは、サービスとデータをホストできる場所が限定され、ベンダーへのロックインが生じます
それにもかかわらず、時間の経過とともに、組織の複雑さは複数のプラットフォームの採用につながります
しかし、これらのプラットフォームはお互いにうまく連携しません
それぞれがデータまたはアプリケーションの唯一のコントローラであることを想定しています
これにより、臨時の高価な統合やプラットフォーム間でのデータのコピーが発生します
デフォルトでは、データメッシュは組織の複雑さがマルチプラットフォーム、マルチホスティング環境につながることを受け入れています

---

## Platform plane

図:9-11

---

## 注意点

- データメッシュを実現する技術はまだまだ標準形がない

  - 初めて提唱されたのが 2020 年 12 月の論文

    - 参考:
    - ちなみに本書の著者が論文の著者

  - AWS は DataZone が 2023 年にプレビューしたが,データカタログにフォーカスしており包括的ではない
  - GCP の Dataplex も同じ感じ
  - Azure は DataFabric などがあるが,少し違う概念？

- 難しい分野なので,ドメインと協力しながら小さく確実に,イテレーティブに進めていくことが重要
  - データに関する要求が変わり続ける限り開発に終わりはない
  - 社内意見を取り入れながらイテレーティブに進める必要があるため外部ベンダーに丸投げではうまくいかない

---

## 今後の進め方

- ダミーのデータで良いので,プラットフォームのプロトタイプを作成し,データ製品の開発者エクスペリエンスを検証したい

  - どうやって？
  - どこまでやるの？
  - ダミーでやる必要ある？
    - ない気がしてきた。既存ドメインの邪魔にならないようにすればいいんじゃね？
    - もし,うまい具合に既存ドメインに導入できれば,やっぱやめたとか,中央集権型にしようとかできる気もする

- これと並行して連合チームの設立や目的なども設定したい
- でもそもそもこのやり方で行くんか？ってのがあるから,ここら辺は周りの決定力のあるチームと話していく必要はあるのかもしれない
- すでに独自でデータレイクやデータウェアハウスなどのデータ基盤を構築しているいくつかのドメインに対してプラットフォームを提供し,データ製品として公開させる
  - 既存のデータ基盤を参考にプラットフォームを合わせるように開発／構築していく
  - いくつか,と書いた理由は複数ドメインによるデータ製品によるデータ連携の効果検証を行うため
    - できれば,現在もデータ連携を行っている異なるドメインを選びたい

---

## 技術的な観点の進め方

- 毎週この本の勉強会を行う？
- SaaS や PaaS がないのかどうかは調べておきたいところ
- もしないなら k8s でプラットフォームエンジニアリングしようぜ！

---

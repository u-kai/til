# 15 独自のトレードオフ分析を構築する

-   トレードオフ分析プロセス

1. どの部分が互いに絡み合っているのかを見つける
1. それらがどのように結合しているのかを分析する
1. 変更時にその結合がどんな影響をもたらすのかを見極め，トレードオフを評価する

## 絡み合う次元の発見

-   このステップで見つける次元の組みはアーキテクチャによって固有のものであり，経験豊富な開発者，アーキテクト，運用担当など，既存のエコシステム全体とその機能や制約に精通している役割が協力し合って見つける必要がある

### 結合

-   結合に関しては，X を変更した場合に Y も変更する必要があるか？でわかる
-   これはアーキテクチャによって異なるため，俯瞰的な構成図作成してくれるツールはなく．自分たちの構成ずは手動または独自の自動化で生成する必要がある
-   例えばあるマイクロサービスアーキテクチャの静的結合図を作成するには次の詳細情報を集める必要がある

    -   OS:コンテナの依存関係
    -   推移的な依存関係管理によって提供される依存関係(フレームワークやライブラリなど)
    -   データベース，検索エンジン，クラウド環境などの永続的な依存関係
    -   サービスが自己起動するために必要なアーキテクチャ結合点
    -   他の量子との通信を可能にするために必要なメッセージングインフラ(メッセージングブローカーなど)

-   静的結合図ではワークフロー通信のみが唯一の結合てんであるような量子同士は結びつかない
    -   これは動的な結合

### 結合点の分析

-   分析対象となる結合点を特定したら，次は可能な組み合わせを軽量な方法でモデル化する
-   ここでの分析のゴールは検討すべき特性，つまりトレードオフ分析が必要な特性を見極めることにある
-   例えばアーキテクチャ量子動的結合分析では，結合，複雑性，応答性／可用性，スケール／弾力性をトレードオフの主な関心ごととして，通信，整合性，調整の 3 つの力の分析に加えて評価表などを作成し評価する
-   マトリクスを作成することで，アーキテクトは 1 つ以上の次元の組み合わせがどのように影響しあうのかを研究するためのモデルを作り上げることができる

###トレードオフの評価

-   同期性のような根本的な次元を最初に選択してしまうことは将来の選択肢を狭めてしまう
    -   こうした根本的な次元の選択を固定したら，それによって促進されたり，矯正されたりする後続の次元の選択についてもイテレーティブに分析すること
-   イテレーティブに分析をして，決定ができるまで，プロセスを繰り返す

## トレードオフ手法

### 定性的分析と定量的分析

-   アーキテクチャでは真の定量的分析を行う機会はほとんどない
-   そのため定性分析を行うスキルを磨くべし

### MECE リスト

-   アーキテクトにとって重要なのは全く異なるものではなく，同じ土俵のものを比較していると確認すること
-   比較すべき対象を正しく把握するために，MECE リストを使うと良い
-   互いに重複せず
    -   比較対象となる項目間でどの能力も重ならないこと
-   全体として漏れがない

    -   これは決定空間における全ての可能性を網羅していること，そしていかなる能力も選択肢から除外していないことを示している

-   ソフトウェアの発展によって，新しい機能が発見されることもあり，基準を変えるような新しい能力が登場していないかを確認する必要がある
-   比較基準が一括して網羅されていることを確認することでそのような調査が可能になる

### コンテキスト外の罠

-   トレードオフを評価するときはコンテキストに沿った決定をしないと，外部要因が分析に過渡に影響してしまう
-   汎用的なソリューションは状況に応じた追加のコンテキストを適用しない限り，現実のアーキテクチャではほとんど役に立たないことは忘れないでおくこと
-   意思決定のための狭いコンテキストを持っていることで実装をシンプルかつ迅速に解決できる
-   いてレーティブに，もしある出来事が起こったらどうなる？ゲームを繰り返すことでアーキテクトは可能なソリューションを調査し，ある決定が属する適切なコンテキストを発見できる

### 関連するドメインのシナリオをモデル化する

-   なんらかのビジネス価値につながる要因がない状態でアーキテクトは決定を下すべきでない
-   ドメイン上の根拠を持つ推進要因があるかどうかを判断に用いることで，アーキテクトは選択肢を絞ることができ，本当に重要なトレードオフに集中できる

-   アーキテクチャの問題を汎用的かつ抽象的に考えることには限界がある
-   汎用的に考えても，アーキテクチャの問題はそこからすり抜けてしまうため，アーキテクトにとって重要なのは，関連するドメインのシナリオをモデル化するスキルを身につけ，より良いトレードオフ分析と意思決定に専念すること

### 根拠は示しすぎず，肝心なものに絞る

-   アーキテクトは収集した情報を全て示すのではなく，トレードオフ分析をいくつかの重要なポイントに絞るべき
-   混乱を招くような技術的な詳細を排除することで技術者ではない領域のステークホルダーは設計上の決定ではなく，結果に焦点を当てられ，詳細の海に溺れてしまうことを防げる

### 過度な売り込みやエバンジェリズムを避ける

-   アーキテクチャは常にトレードオフなので，エバンジェリストのようにあるツールやプラクティスの良いところだけをを伝導するのは良くない
-   良い点悪い点を正直に評価してもらいよりバランスの取れた決断をするべし
-   シナリオ分析はシステムを全て構築することなく，いてレーティブな設計を可能にする強力なツール
-   想定されるシナリオをモデル化することで特定のソリューションが実際にうまく機能するかどうかを発見できる
-   銀の弾丸を追い求めるのではなく，トレードオフを分析するスキルに磨きをかけることでアーキテクトは組織に真の価値を提供できる

# スイッチ

- どのスイッチでも必ず装備している機能はアドレス学習機能と転送機能

## 学習機能

- 学習した内容(受信ポートと送信元 MAC アドレスの対応付)を MAC アドレステーブルに登録する

  - これが学習きのう

- スイッチを VLAN で分割している場合，VLAN ごとに MAC アドレステーブルが存在する
- エージングタイムによって再学習がかかる

## 転送機能

- スイッチは MAC フレームを受信すると，どのポートの先にどのノードがあるのかを MAC アドレステーブルから判定し，特定のポートからフレームを送り出す機能
- かくポートから一斉にフレームを転送する機能をフラッディングという
- フラッディングの用途
  - ブロードキャストフレームの転送
  - マルチキャストフレームの転送
    - 特別なマルチキャストアドレス以外はフラディングする
  - 宛先ノードのアドレス学習が済んでいない場合のユニキャストフレームの転送
    - ユニキャストフレームを受信した際にその宛先 MAC アドレスが MAC アドレステーブルに存在しない場合はフラッディングして全てに流す

## ブロードキャストストーム

- ブロードキャストドメインのな k，あでスイッチを介した経路がループ上になっていると巡回してしまう

## ミラーリング

- あるポートを経由するフレームを特定のポートにコピーする機能
- フレームを取り込む端末の NIC をプロミスキャスモードに設定しないと，他端末向けのフレームを捕捉することができない

## 認証スイッチ

- IEEE802.1X 規格に準拠したスイッチはポートに割り当てる VLAN を動的に切り替える機能を持っている
- 切り替える VLAN ID は認証サーバから受け取る仕組みになっている

## MAC アドレスフィルタリング

## ループ防止

- ブロードキャストフレームの巡回を検知すると，そのブロードキャストフレームを破棄してブロードキャストストームの発生を未然に防ぐ機能を持つスイッチがある
- ループ検知用フレームの定期送信
  - スイッチはループ検知用のフレームを定期的に送信する
  - これを自分が再び受信するとループしていると判断する
- フラっピングの検知
  - 経路がループしていると同じ MAC アドレスを送信元とするフレームを複数ポートからほぼ同時に受信するという現象が見られる
  - スイッチは別のポートから受信するたびにアドレス学習機能によって MAC アドレステーブルを更新する
    - 経路がループしているときこの更新が短時間のうちに頻発してしまう
    - この現象をフラッピんぐやスラッシングという
    - フラッピんぐが発生するとループしていると判断する

## SNMP エージェント

- SNMP マネージャと通信するために IP アドレス，サブネットマスク，デフォルトゲートウェイをスイッチに設定する
- このように IP アドレスを持つスイッチをインテリジェントスイッチという

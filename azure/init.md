# Azure の基本概要

## Azure の利点

- MS365 や Intune などの Microsoft 製品との親和性が高い

## データセンター

- Azure のデータセンターはジオ，リージョン，可用性ゾーン(有効なリージョンのみ)という概念でグループ化されている
- またリージョンは他のリージョンとリージョンペアを構成している
- Azure のデータセンターは地理的な概念でグループ化されており，必ずいずれかのジオならびにリージョンに所属している
- ジオは最も大きな地理的概念でリージョンはジオないを地域で細分化した概念
- リージョンペアは BCP や DR の概念
- Azure のリージョンは同じジオ内の他のリージョンとリージョンペアが設定されている

  - 日本では東日本と，西日本がリージョンペアになっている
  - リージョンペアになっているリージョンは Azure 基盤への更新プログラムの適用やメンテナンスが同時に実施されないように管理されている
  - また万が一複数のリージョンに影響が及ぶ障害が発生してしまい，すべてのリージョンを同時に復旧することが叶わない場合は，それぞれのリージョンペアの少なくとも片方のリージョンは優先的に復旧するよう運用されている

  - BCP を考慮する場合，バックアップ目的のためにシステムを複数リージョンで稼働させることになると思うが，その際はペアリージョンを意識すること
  - ペアリージョンでない場合は同時に Azure 基盤へのメンテナンスが実施される可能性があり，BCP を実現できない可能性がある

- 可用性ゾーンはリージョン内の物理的な場所のグループ
  - それぞれの可用性ゾーンは物理的かつ論理的に分離されたデータセンターで管理され，独立した電源，ネットワーク，冷却装置を備えている
  - 可用性ゾーン同士は低遅延ネットワーク

## AWS との比較

https://docs.microsoft.com/jajp/azure/architecture/awsprofessional/services

## リソースマネージャデプロイ

- リソースのグループ管理

  - リソースを個別に処理するのではなく，ソリューションに必要なリソースをグループ化してデプロイ,管理，監視できる

- 宣言方テンプレートの使用

  - どういうことや？それがデフォルトなのか？

- アクセス制御の適用

  - RBAC が管理プラットフォームにネイティブに統合されるのですべてのサービスにアクセス制御を適用できる

- タグづけによる管理
  - リソースにはタグ付けができて，すべてのリソースを論理的に整理できる
  - また，同じタグを共有するリソースのグループのコストを表示すれば組織ごとの課金をわかりやすくまとめることができる

### リソースグループ

- リソースを論理的にグループ化するためのコンテナ
- リソースグループに含まれるすべてのリソースは一括でデプロイ，更新，削除できる

  - リソースのデプロイと定義が別ってこと？

- リソースはただ 1 つのリソースグループにだけ属することができる

  - ただし，あとで別のリソースグループに移動することはできる
  - あとから追加や削除もできる

- 異なるリージョンのリソースも含められる
- ライフサイクルが同じリソースをまとめるのが良い
- 異なるリソースグループ間のやり取りは自由
- 権限をまとめて設定できる
  - Azure のリソースの操作や参照の権限を付加する場合，リソースグループ単位で権限を付加することができる
  - 大雑把すぎんか？
  - それともそんぐらいリソースグループは分けるのがベスプラなんか？

## リソースプロバイダー

- リソースを実際に操作したり，管理したいりする機能を担うのがリソースプロバイダー
- リソースごとにリソースプロバイダーが決まっている
  - VM は Microsoft.Compute
  - ストレージは Microsoft.Storage
- どのようなリソースが利用できるのかはサブスクリプションで何を有効かするかによって異なる

## ARM(Azure Resource Manager)テンプレート

- リソースグループへのデプロイ対象となるリソースを定義する JSON 形式のファイル
- リソース間の依存関係もこのテンプレートで定義する

  - これしか方法がないのか？
  - どのくらいマネコンでぽちぽちするの？
  - Terraform との棲み分けは？

- ARM テンプレートをより簡易にする技術として今後 Bicep が登場する予定

## Azure の利用開始について

- Azure の利用を開始するには Azure へサインアップするためのアカウントが必要でそれは 2 種類ある

  1. MS アカウント
  1. 職場または学校アカウント

- アカウントに加えて Azure サブスクリプションが必要

## MS Learn

https://docs.microsoft.com/jajp/learn/
